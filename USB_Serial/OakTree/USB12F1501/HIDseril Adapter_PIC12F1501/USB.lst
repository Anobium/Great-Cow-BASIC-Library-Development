MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*****************************************************************************************************
                      00002 ;
                      00003 ;       USB PIC12F1501
                      00004 ;
                      00005 ;*****************************************************************************************************
                      00006 
                      00007         list            p=12F1501      ; list directive to define processor
                      00008         #include        <p12F1501.inc> ; processor specific variable definitions
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC12F1501 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      01220         LIST
                      00009         errorlevel      -302
                      00010 
Message[303]: Program word too large.  Truncated to core size. (F9A7)
8007   39A7           00011     __CONFIG _CONFIG1, _FOSC_ECH & _WDTE_OFF & _PWRTE_OFF & _MCLRE_OFF & _CP_OFF & _BOREN_OFF & _CLKOUTE
                            N_OFF
Message[303]: Program word too large.  Truncated to core size. (DDFF)
8008   1DFF           00012     __CONFIG _CONFIG2, _WRT_OFF & _STVREN_OFF & _BORV_LO & _LPBOR_OFF & _LVP_OFF
                      00013 
  01C9C380            00014 xtal    EQU     .30000000
  00002580            00015 baud    EQU     .9600
                      00016 
                      00017 #define INDF            INDF0
                      00018 #define FSR             FSR0L
                      00019 #define TRISIO          TRISA
                      00020 #define GPIO            PORTA
                      00021 #define ANSEL           ANSELA
                      00022 
                      00023 ;****************************************************************************
                      00024 ;
                      00025 ;       DEFINICION DE ETIQUETAS Y VARIABLES
                      00026 ;
                      00027 ;****************************************************************************
                      00028 ;PORT/PIN
  00000000            00029 RTS                     EQU             0
  00000001            00030 TX                      EQU             1
  00000002            00031 DataMas                 EQU             2
  00000003            00032 RX                      EQU             3
  00000004            00033 DataMenos               EQU             4
  00000005            00034 OSC1                    EQU             5
                      00035 
                      00036 ;RAM-Variables
  00000020            00037 Banderas_0              EQU             0x20
  00000021            00038 Banderas_1              EQU             0x21
  00000022            00039 ByteAMandar             EQU             0x22
  00000023            00040 Veces                   EQU             0x23
  00000024            00041 RecNRZI_0               EQU             0x24
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000025            00042 RecNRZI_1               EQU             0x25
  00000026            00043 RecNRZI_2               EQU             0x26
  00000027            00044 RecNRZI_3               EQU             0x27
  00000028            00045 RecNRZI_4               EQU             0x28
  00000029            00046 RecNRZI_5               EQU             0x29
  0000002A            00047 RecNRZI_6               EQU             0x2A
  0000002B            00048 RecNRZI_7               EQU             0x2B
  0000002C            00049 RecNRZI_8               EQU             0x2C
  0000002D            00050 RecNRZI_9               EQU             0x2D
  0000002E            00051 RecNRZI_A               EQU             0x2E
  0000002F            00052 RecNRZI_B               EQU             0x2F
  00000030            00053 RecNRZI_C               EQU             0x30
  00000031            00054 BytesRecibidos          EQU             0x31
  00000032            00055 NuevoAddress            EQU             0x32
  00000033            00056 PID                     EQU             0x33
  00000034            00057 Recibido_1              EQU             0x34
  00000035            00058 Recibido_2              EQU             0x35
  00000036            00059 Recibido_3              EQU             0x36
  00000037            00060 Recibido_4              EQU             0x37
  00000038            00061 Recibido_5              EQU             0x38
  00000039            00062 Recibido_6              EQU             0x39
  0000003A            00063 Recibido_7              EQU             0x3A
  0000003B            00064 Recibido_8              EQU             0x3B
  0000003C            00065 Recibido_9              EQU             0x3C
  0000003D            00066 Recibido_A              EQU             0x3D
  0000003E            00067 Recibido_B              EQU             0x3E
  0000003F            00068 Recibido_C              EQU             0x3F
  00000040            00069 Var_0                   EQU             0x40
  00000041            00070 Var_1                   EQU             0x41
  00000042            00071 Posicion                EQU             0x42
  00000043            00072 RespPID                 EQU             0x43
  00000044            00073 Resp_0                  EQU             0x44
  00000045            00074 Resp_1                  EQU             0x45
  00000046            00075 Resp_2                  EQU             0x46
  00000047            00076 Resp_3                  EQU             0x47
  00000048            00077 Resp_4                  EQU             0x48
  00000049            00078 Resp_5                  EQU             0x49
  0000004A            00079 Resp_6                  EQU             0x4A
  0000004B            00080 Resp_7                  EQU             0x4B
  0000004C            00081 Resp_8                  EQU             0x4C
  0000004D            00082 Resp_9                  EQU             0x4D
  0000004E            00083 Resp_A                  EQU             0x4E
  0000004F            00084 Resp_B                  EQU             0x4F
  00000070            00085 Var_2                   EQU             0x70
  00000071            00086 Var_3                   EQU             0x71
  00000072            00087 Var_4                   EQU             0x72
  00000073            00088 Var_5                   EQU             0x73
  00000074            00089 Var_6                   EQU             0x74
  00000075            00090 Var_7                   EQU             0x75
  00000076            00091 Var_8                   EQU             0x76
  00000077            00092 Var_9                   EQU             0x77
                      00093 ;;;Rec_W                EQU             0x78
                      00094 ;;;Rec_STATUS           EQU             0x79
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00095 ;;;Rec_FSR              EQU             0x7A
                      00096 ;;;Rec_PCLATH           EQU             0x7B
  0000007C            00097 DeviceAddress           EQU             0x7C
  0000007D            00098 UltAddressRec           EQU             0x7D
  0000007E            00099 cn                      EQU             0x7E
  0000007F            00100 rxd                     EQU             0x7F
                      00101 
                      00102 #define AddrAsignOK             Banderas_0, 0
                      00103 ;                               Banderas_0, 1
                      00104 ;                               Banderas_0, 2
                      00105 #define Ocupado                 Banderas_0, 3
                      00106 ;                               Banderas_0, 4
                      00107 #define Setup                   Banderas_0, 5
                      00108 ;                               Banderas_0, 6
                      00109 ;                               Banderas_0, 7
                      00110 #define AsignAddress            Banderas_1, 0
                      00111 #define Data1                   Banderas_1, 1
                      00112 #define INPend                  Banderas_1, 3
                      00113 #define InterruptIN             Banderas_1, 4
                      00114 #define Stall                   Banderas_1, 5
                      00115 #define ZLPPend                 Banderas_1, 6
                      00116 
                      00117 ;****************************************************************************
                      00118 ;
                      00119 ;               +++++++++++++ ASIGNACION DE MEMORIA DE PROGRAMA ++++++++++++++
                      00120 ;
                      00121 ;****************************************************************************
                      00122 
                      00123 ; Programa
                      00124 
0000                  00125         ORG     0x0000                          ;Vector de Reset
                      00126 
                      00127 ;;      BCF     STATUS, RP0                     ;Selecciono Banco 0
0000   0020           00128         movlb   0
0001   018C           00129         CLRF    GPIO                            ;Limpio GPIO
0002   2811           00130         GOTO    Configurar
                      00131 
0004                  00132         ORG     0x0004                          ;Vector de Interrupción
                      00133 
0004   2805           00134         goto    $+1                             ;30MHz adjust
0005   0000           00135         nop                                     ;{0}[0]
0006   2831           00136         GOTO    RecepcionUSB                    ;{12}[12]
                      00137 
0007                  00138 TMovf
0007   30EB           00139         MOVLW   ~((1<<DataMenos)|(1<<DataMas))  ;'11111001'
0008   058C           00140         ANDWF   GPIO, F                         ;Limpio D+ y D- y dejo el puerto como esta...
                      00141 ;1      CLRF    TMR0                            ;Limpio TMR0
0009   111C           00142         bcf     T2CON,TMR2ON                    ;1
000A   1091           00143         bcf     PIR1,TMR2IF                     ;1
000B   1720           00144         BSF     Banderas_0, 6
                      00145 ;       NOP
                      00146 ;;;     CLRF    INTCON
                      00147 ;;      BSF     STATUS, RP0                     ;Selecciono Banco 1
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000C   0021           00148         movlb   1
000D   3014           00149         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;'00001110' SE0, D+, D- entradas
000E   048C           00150         IORWF   TRISIO,F                        ;SE0, D+, D- en Tristate
                      00151 ;;      BCF     STATUS, RP0                     ;Selecciono Banco 0
000F   0020           00152         movlb   0
0010   2821           00153         GOTO    EsperoContinuacion
                      00154 
0011                  00155 Configurar
                      00156 ;;      MOVLW   0x07                            ;Comparador
                      00157 ;;      MOVWF   CMCON                           ;deshabilitado
                      00158 ;;      BSF     STATUS, RP0                     ;Selecciono Banco 1
0011   0021           00159         movlb   1
0012   3014           00160         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;SE0, D+, D- entradas
                      00161 ;;;     IORWF   TRISIO,F                        ;Entrada
                      00162 ;;;     bcf     TRISIO,TX                       ;TX=OUTPUT
0013   008C           00163         movwf   TRISIO                          ;DataMenos,DataMas=INPUT, TX,RTS=OUTPUT
                      00164 ;;;     MOVLW   0xC1
0014   30C3           00165         movlw   B'11000011'                     ;0.133uS x 256 x 16 = 546uS
0015   0095           00166         MOVWF   OPTION_REG                      ;Cargo el registro OPTION
                      00167 ;;      CLRF    VRCON                           ;VRef apagado
0016   0023           00168         movlb   3
0017   018C           00169         CLRF    ANSEL                           ;Selector Analogo deshabilitado
                      00170 ;;      BCF     STATUS, RP0                     ;Selecciono Banco 0
0018   0020           00171         movlb   0
0019   3020           00172         movlw   B'00100000'                     ;1
001A   009C           00173         movwf   T2CON                           ;1
001B   148C           00174         bsf     GPIO,TX                         ;TX port Initialization
001C   140C           00175         bsf     GPIO,RTS                        ;disable Data from the host
                      00176 
001D                  00177 LoopPrincipal
001D   01A0           00178         CLRF    Banderas_0
001E   01A1           00179         CLRF    Banderas_1
001F   302A           00180         MOVLW   0x2A                            ;'00101010'  Address 0x00 inicialmente en NRZI (7 bits)
0020   00FC           00181         MOVWF   DeviceAddress
0021                  00182 EsperoContinuacion
0021   11A0           00183         BCF     Ocupado
0022   3090           00184         MOVLW   ((1<<GIE)|(1<<INTE))
0023   008B           00185         MOVWF   INTCON
0024                  00186 EspInt
0024   1A0C           00187         BTFSC   GPIO, DataMenos                 ;DataMenos en "0"?
0025   2824           00188         GOTO    EspInt
0026   190C           00189         BTFSC   GPIO, DataMas                   ;DataMas en "0"?
0027   2824           00190         GOTO    EspInt
0028   3002           00191         MOVLW   0x02
0029   00F2           00192         MOVWF   Var_4                           ;Cargo mi variable con 2 de TimeOut...
002A                  00193 DescTimeOut
002A   1A0C           00194         BTFSC   GPIO, DataMenos                 ;DataMenos en "0"?
002B   2824           00195         GOTO    EspInt
002C   190C           00196         BTFSC   GPIO, DataMas                   ;DataMas en "0"?
002D   2824           00197         GOTO    EspInt
002E   0BF2           00198         DECFSZ  Var_4, F
002F   282A           00199         GOTO    DescTimeOut
0030   281D           00200         GOTO    LoopPrincipal                   ;TimeOut, espero otro Token
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00201 
0031                  00202 RecepcionUSB
0031   2832           00203         GOTO    $ + 1                           ;D+ en "0"?             (2)     {30}[34]
0032   0000           00204         nop                                     ;                                +  [0]
0033   1D0C           00205         BTFSS   GPIO, DataMas                   ;D+ en "1"?             (3)     {1} [1]
0034   2897           00206         GOTO    LimpioINT                       ;                               {2} [2]
0035   2836           00207         GOTO    $ + 1                           ;                               {30}[34]
0036   0000           00208         nop                                     ;                                +  [0]
0037   190C           00209         BTFSC   GPIO, DataMas                   ;D+ en "0"?             (4)     {1} [1]
0038   2897           00210         GOTO    LimpioINT                       ;                               {2} [2]
                      00211 ;;;     MOVWF   Rec_W                           ;Primero Guardo W...            {3} [3]
                      00212 ;;;     SWAPF   STATUS, W                       ;Invierto STATUS en W           {0} [4]
0039   283A           00213         goto    $+1
003A   0000           00214         nop                                     ;                                +  [0]
003B   1D0C           00215         BTFSS   GPIO, DataMas                   ;D+ en "1"?             (5)     {1} [1]
003C   2897           00216         GOTO    Recupero_W                      ;                               {2} [2]
                      00217 ;;;     MOVWF   Rec_STATUS                      ;Guardo el STATUS Invertido...  {3} [3]
                      00218 ;;;     MOVFW   PCLATH                          ;                               {0} [4]
003D   283E           00219         goto    $+1
003E   0000           00220         nop                                     ;                                +  [0]
003F   190C           00221         BTFSC   GPIO, DataMas                   ;D+ en "0"?             (6)     {1} [1]
0040   2897           00222         GOTO    Recupero_STATUS                 ;Recupero desde STATUS + W      {2} [2]
                      00223 ;;;     MOVWF   Rec_PCLATH                      ;Guardo PCLATH                  {3} [3]
                      00224 ;;;     MOVFW   FSR                             ;                               {0} [4]
0041   2842           00225         goto    $+1
0042   0000           00226         nop                                     ;                                +  [0]
0043   1D0C           00227         BTFSS   GPIO, DataMas                   ;D+ en "1"?             (7)     {1} [1]
0044   2897           00228         GOTO    Recupero_PCLATH                 ;Recupero desde PCLATH + STATUS + W {2} [2]
                      00229 ;;;     MOVWF   Rec_FSR                         ;                               {3} [3]
0045   3024           00230         MOVLW   RecNRZI_0                       ;                               {0} [4]
                      00231 ;;;     nop                                     ;                                +  [0]
0046   2847           00232         goto    $+1
0047   1D0C           00233         BTFSS   GPIO, DataMas                   ;D+ en "1"?             (8)     {1} [1]
0048   2897           00234         GOTO    RegresardeInterrupt             ;                               {2} [2]
0049   0084           00235         MOVWF   FSR                             ;                               {3} [3]
004A   0180           00236         CLRF    INDF                            ;                               {0} [4]
004B   0000           00237         nop                                     ;                                +  [0]
004C   190C           00238         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     {1} [1]
004D   1400           00239         BSF     INDF, 0                         ;                               {2} [2]
004E   284F           00240         GOTO    $ + 1                           ;                               {30}[34]
004F   0000           00241         nop                                     ;                                +  [0]
0050   190C           00242         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     {1} [1]
0051   1480           00243         BSF     INDF, 1                         ;                               {2} [2]
0052   2853           00244         GOTO    $ + 1                           ;                               {30}[34]
0053   018A           00245         CLRF    PCLATH                          ;Limpio PCLATH                   +  [0]
0054                  00246 ContinuoRecibiendo
0054   190C           00247         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     [1]  [1]
0055   2859           00248         goto    $+4                             ;                               [23] [2]
0056   1A0C           00249         BTFSC   GPIO, DataMenos                 ;D- en "0"?                          [3]
0057   285B           00250         goto    $+4                             ;                                    [40]
0058   2882           00251         GOTO    Identificar_PID                 ;
0059   0000           00252         nop                                     ;                               [4]
005A   1500           00253         BSF     INDF, 2                         ;                               [0]
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00254 
005B   190C           00255         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     {1} [1]
005C   1580           00256         BSF     INDF, 3                         ;                               {2} [2]
005D   285E           00257         GOTO    $ + 1                           ;Pierdo dos ciclo...            {30}[34]
005E   0000           00258         nop                                     ;                                +  [0]
                      00259 
005F   190C           00260         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     [1]  [1]
0060   2864           00261         goto    $+4                             ;                               [23] [2]
0061   1A0C           00262         BTFSC   GPIO, DataMenos                 ;DataMenos en "0"?                   [3]
0062   2866           00263         goto    $+4                             ;                                    [40]
0063   2882           00264         GOTO    Identificar_PID                 ;
0064   0000           00265         nop                                     ;                               [4]
0065   1600           00266         BSF     INDF, 4                         ;                               [0]
                      00267 
0066   190C           00268         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     {1} [1]
0067   1680           00269         BSF     INDF, 5                         ;                               {2} [2]
0068   0824           00270         MOVFW   RecNRZI_0                       ;                               {3} [3]
0069   390F           00271         ANDLW   0x0F                            ;                               {0} [4]
006A   0000           00272         nop                                     ;                                +  [0]
                      00273 
006B   190C           00274         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     [1]  [1]
006C   2870           00275         goto    $+4                             ;                               [23] [2]
006D   1A0C           00276         BTFSC   GPIO, DataMenos                 ;DataMenos en "0"?                   [3]
006E   2872           00277         goto    $+4                             ;                                    [40]
006F   2882           00278         GOTO    Identificar_PID                 ;
0070   0000           00279         nop                                     ;                               [4]
0071   1700           00280         BSF     INDF, 6                         ;                               [0]
                      00281 
0072   190C           00282         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     {1} [1]
0073   1780           00283         BSF     INDF, 7                         ;                               {2} [2]
0074   0A84           00284         INCF    FSR, F                          ;                               {3} [3]
0075   0180           00285         CLRF    INDF                            ;                               {0} [4]
0076   0000           00286         nop                                     ;                                +  [0]
                      00287 
0077   190C           00288         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     [1]  [1]
0078   287C           00289         goto    $+4                             ;                               [23] [2]
0079   1A0C           00290         BTFSC   GPIO, DataMenos                 ;DataMenos en "0"?                   [3]
007A   287E           00291         goto    $+4                             ;                                    [40]
007B   2882           00292         GOTO    Identificar_PID                 ;
007C   0000           00293         nop                                     ;                               [4]
007D   1400           00294         BSF     INDF, 0                         ;                               [0]
                      00295 
007E   190C           00296         BTFSC   GPIO, DataMas                   ;D+ en "0"?                     {1} [1]
007F   1480           00297         BSF     INDF, 1                         ;                               {2} [2]
0080   0000           00298         nop                                     ;                                +  [3]
0081   2854           00299         GOTO    ContinuoRecibiendo              ;                               {30}[40]
                      00300 
0082                  00301 Identificar_PID
0082   000B           00302         brw     
0083   2897           00303         GOTO    RegresardeInterrupt             ;NRZI = 1110    STALL
0084   2899           00304         GOTO    SETUPToken                      ;NRZI = 1101    SETUP
0085   2897           00305         GOTO    RegresardeInterrupt             ;NRZI = 1000    SPLIT
0086   28CC           00306         GOTO    DATARecibido                    ;NRZI = 1011    DATA1
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0087   28A1           00307         GOTO    ACKTokenRecibido                ;NRZI = 0010    ACK
0088   2895           00308         GOTO    OUTToken                        ;NRZI = 0001    OUT
0089   2897           00309         GOTO    RegresardeInterrupt             ;NRZI = 0100    PING
008A   2897           00310         GOTO    RegresardeInterrupt             ;NRZI = 0111    DATA2
008B   2897           00311         GOTO    RegresardeInterrupt             ;NRZI = 0110    NYET
008C   2897           00312         GOTO    RegresardeInterrupt             ;NRZI = 0101    SOF
008D   2897           00313         GOTO    RegresardeInterrupt             ;NRZI = 0000    Reserved PID
008E   28CC           00314         GOTO    DATARecibido                    ;NRZI = 0011    DATA0
008F   2897           00315         GOTO    RegresardeInterrupt             ;NRZI = 1010    NAK
0090   28AB           00316         GOTO    INToken                         ;NRZI = 1001    IN
0091   2897           00317         GOTO    RegresardeInterrupt             ;NRZI = 1100    PRE
0092   2897           00318         GOTO    RegresardeInterrupt             ;NRZI = 1111    MDATA
                      00319 
0093                  00320 TodaviaNO
0093   210F           00321         CALL    MandarNAK                       ;La respuesta no esta lista, mando NAK Handshake
0094   2897           00322         GOTO    RegresardeInterrupt
                      00323 
0095                  00324 OUTToken
0095   0825           00325         MOVFW   RecNRZI_1
0096   00FD           00326         MOVWF   UltAddressRec
                      00327 
0097                  00328 RegresardeInterrupt                             ;Recupero todos los Registros...
                      00329 ;;;     MOVFW   Rec_FSR
                      00330 ;;;     MOVWF   FSR                             ;Recupero FSR...
0097                  00331 Recupero_PCLATH
                      00332 ;;;     MOVFW   Rec_PCLATH                      ;Recupero PCLATH
                      00333 ;;;     MOVWF   PCLATH
0097                  00334 Recupero_STATUS
                      00335 ;;;     SWAPF   Rec_STATUS, W                   ;Enderezo STATUS
                      00336 ;;;     MOVWF   STATUS                          ;Recupero STATUS...
0097                  00337 Recupero_W
                      00338 ;;;     SWAPF   Rec_W, F
                      00339 ;;;     SWAPF   Rec_W, W
                      00340 
0097                  00341 LimpioINT
0097   108B           00342         BCF     INTCON, INTF
                      00343 ;;;     BTFSC   INTCON, INTF
                      00344 ;;;     GOTO    LimpioINT
0098   0009           00345         RETFIE
                      00346 
0099                  00347 SETUPToken
0099   0825           00348         MOVFW   RecNRZI_1
009A   00FD           00349         MOVWF   UltAddressRec                   ;Guardo el Address recibido en UltAddressRec
009B   397F           00350         ANDLW   0x7F                            ;Solamente 7 bits de address
009C   067C           00351         XORWF   DeviceAddress, W                ;Comparo con mi address actual
009D   1D03           00352         BTFSS   STATUS, Z                       ;Mi address es igual al address recibido?
009E   2897           00353         GOTO    RegresardeInterrupt             ;NO me hablan a mi, descarto paquete...
009F   16A0           00354         BSF     Setup
00A0   2821           00355         GOTO    EsperoContinuacion
                      00356 
00A1                  00357 ACKTokenRecibido
00A1   1F20           00358         BTFSS   Banderas_0, 6
00A2   2897           00359         GOTO    RegresardeInterrupt
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00A3   1320           00360         BCF     Banderas_0, 6
00A4   1B21           00361         BTFSC   ZLPPend
00A5   12A0           00362         BCF     Setup
00A6   1321           00363         BCF     ZLPPend
00A7   11A1           00364         BCF     INPend
00A8   1EA0           00365         BTFSS   Setup
00A9   1221           00366         BCF     InterruptIN
00AA   2821           00367         GOTO    EsperoContinuacion
                      00368 
00AB                  00369 INToken
00AB   307F           00370         MOVLW   0x7F                            ;Solamente 7 bits de address
00AC   0525           00371         ANDWF   RecNRZI_1, W
00AD   067C           00372         XORWF   DeviceAddress, W
00AE   1D03           00373         BTFSS   STATUS, Z                       ;Address Recibido es igual al address con el que estoy t
                            rabajando?
00AF   2897           00374         GOTO    RegresardeInterrupt             ;Address no coincide descarto paquete...
00B0   19A0           00375         BTFSC   Ocupado
00B1   2893           00376         GOTO    TodaviaNO
00B2   1403           00377         BSF     STATUS, C                       ;Cargo el Carry con "1"
00B3   0D25           00378         RLF     RecNRZI_1, W                    ;Inserto en "1" de Carry por la Derecha y lo guardo en W
00B4   06A5           00379         XORWF   RecNRZI_1, F
00B5   09A5           00380         COMF    RecNRZI_1, F                    ;Decripto Address en NRZI
00B6   1BA5           00381         BTFSC   RecNRZI_1, 7                    ;ENDPOINT = 0?
00B7   28C1           00382         GOTO    ResponderIN                     ;NO
00B8   1821           00383         BTFSC   AsignAddress
00B9   28C4           00384         GOTO    AsignarNuevoAddress
00BA   1AA1           00385         BTFSC   Stall
00BB   290B           00386         GOTO    MandarSTALL
00BC   1B21           00387         BTFSC   ZLPPend
00BD   28C8           00388         GOTO    MandarZLP
00BE   19A1           00389         BTFSC   INPend
00BF   296C           00390         GOTO    EscribirUSBDATA                 ;Mandar USB...
00C0   2A52           00391         GOTO    ContTabla                       ;Levantar mas tabla...
                      00392 
00C1                  00393 ResponderIN
00C1   1E21           00394         BTFSS   InterruptIN
00C2   2893           00395         GOTO    TodaviaNO
00C3   296C           00396         GOTO    EscribirUSBDATA
                      00397 
00C4                  00398 AsignarNuevoAddress
00C4   0832           00399         MOVFW   NuevoAddress
00C5   00FC           00400         MOVWF   DeviceAddress
00C6   1021           00401         BCF     AsignAddress
00C7   1420           00402         BSF     AddrAsignOK
                      00403 
00C8                  00404 MandarZLP
00C8   2107           00405         CALL    MandarDATA
00C9   2821           00406         GOTO    EsperoContinuacion
                      00407 
00CA                  00408 ZLPPendiente                                    ;Zero length packet
00CA   1721           00409         BSF     ZLPPend
00CB   2821           00410         GOTO    EsperoContinuacion
                      00411 
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00CC                  00412 DATARecibido
00CC   307F           00413         MOVLW   0x7F                            ;Solamente 7 bits de address
00CD   057D           00414         ANDWF   UltAddressRec, W
00CE   067C           00415         XORWF   DeviceAddress, W
00CF   1D03           00416         BTFSS   STATUS, Z                       ;Address Recibido es igual al address con el que estoy t
                            rabajando?
00D0   2897           00417         GOTO    RegresardeInterrupt             ;Address no coincide descarto paquete...
00D1   19A0           00418         BTFSC   Ocupado
00D2   2893           00419         GOTO    TodaviaNO
00D3   3024           00420         MOVLW   RecNRZI_0                       ;Posición del primer paquete recibido...
00D4   0204           00421         SUBWF   FSR, W                          ;Resto la posición del ultimo recibido menos la posición
                             del primero...
00D5   3A03           00422         XORLW   0x03
00D6   1D03           00423         BTFSS   STATUS, Z
00D7   28DC           00424         GOTO    ProcesarDATA                    ;NO...
00D8   2111           00425         CALL    MandarACK
00D9   13A0           00426         BCF     Banderas_0, 7
00DA   12A0           00427         BCF     Setup
00DB   2821           00428         GOTO    EsperoContinuacion
                      00429 
00DC                  00430 ProcesarDATA
00DC   0824           00431         MOVFW   RecNRZI_0
00DD   00B3           00432         MOVWF   PID
00DE   0825           00433         MOVFW   RecNRZI_1
00DF   00B4           00434         MOVWF   Recibido_1
00E0   0826           00435         MOVFW   RecNRZI_2
00E1   00B5           00436         MOVWF   Recibido_2
00E2   0827           00437         MOVFW   RecNRZI_3
00E3   00B6           00438         MOVWF   Recibido_3
00E4   0828           00439         MOVFW   RecNRZI_4
00E5   00B7           00440         MOVWF   Recibido_4
00E6   2111           00441         CALL    MandarACK
00E7   15A0           00442         BSF     Ocupado
00E8                  00443 LimpioInterrupcion
00E8   108B           00444         BCF     INTCON, INTF
                      00445 ;;;     BTFSC   INTCON, INTF
                      00446 ;;;     GOTO    LimpioInterrupcion
00E9   178B           00447         BSF     INTCON, GIE
00EA   0829           00448         MOVFW   RecNRZI_5
00EB   00B8           00449         MOVWF   Recibido_5
00EC   082A           00450         MOVFW   RecNRZI_6
00ED   00B9           00451         MOVWF   Recibido_6
00EE   082B           00452         MOVFW   RecNRZI_7
00EF   00BA           00453         MOVWF   Recibido_7
00F0   082C           00454         MOVFW   RecNRZI_8
00F1   00BB           00455         MOVWF   Recibido_8
00F2   082D           00456         MOVFW   RecNRZI_9
00F3   00BC           00457         MOVWF   Recibido_9
00F4   082E           00458         MOVFW   RecNRZI_A
00F5   00BD           00459         MOVWF   Recibido_A
00F6   082F           00460         MOVFW   RecNRZI_B
00F7   00BE           00461         MOVWF   Recibido_B
00F8   0830           00462         MOVFW   RecNRZI_C
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F9   00BF           00463         MOVWF   Recibido_C
00FA   3023           00464         MOVLW   RecNRZI_0 - 1                   ;Posición del primer dato recibido - 1
00FB   0204           00465         SUBWF   FSR, W
00FC   00B1           00466         MOVWF   BytesRecibidos
00FD   21AA           00467         CALL    DesencriptarNRZI
00FE   1EA0           00468         BTFSS   Setup                           ;Salta si es Control Transfer
00FF   2905           00469         GOTO    InterruptTransfer
0100   1E20           00470         BTFSS   Banderas_0, 4
0101   2A68           00471         GOTO    ProcesarSetup                   ; it's SETUP
0102   23EA           00472         CALL    ProcessOut                      ; it's OUT
0103   1220           00473         BCF     Banderas_0, 4
0104   28CA           00474         GOTO    ZLPPendiente
                      00475 
0105                  00476 InterruptTransfer
0105   23EA           00477         CALL    ProcessOut
0106   2821           00478         GOTO    EsperoContinuacion
                      00479 
0107                  00480 MandarDATA
0107   304B           00481         MOVLW   0x4B                            ;'01001011' DATA1
0108   1CA1           00482         BTFSS   Data1
0109   30C3           00483         MOVLW   0xC3                            ;'11000011' DATA0
010A   2912           00484         GOTO    EscribirUSBPID
                      00485 
010B                  00486 MandarSTALL
010B   12A1           00487         BCF     Stall
010C   301E           00488         MOVLW   0x1E                            ;'00011110' STALL Handshake
010D   2112           00489         CALL    EscribirUSBPID
010E   2821           00490         GOTO    EsperoContinuacion
                      00491 
010F                  00492 MandarNAK
010F   305A           00493         MOVLW   0x5A                            ;'01011010' NAK Handshake
0110   2912           00494         GOTO    EscribirUSBPID
                      00495 
0111                  00496 MandarACK
0111   30D2           00497         MOVLW   0xD2                            ;'11010010' ACK Handshake
                      00498 
0112                  00499 EscribirUSBPID
0112   00A2           00500         MOVWF   ByteAMandar
0113   160C           00501         BSF     GPIO, DataMenos                 ;D- en "1"
                      00502 ;;      BSF     STATUS, RP0                     ;Selecciono Banco 1
0114   0021           00503         movlb   1
0115   30EB           00504         MOVLW   ~((1<<DataMenos)|(1<<DataMas))  ;'00001000' Todas Salidas menos SE0
0116   058C           00505         ANDWF   TRISIO,F                        ;SE0 en Tristate
                      00506 ;;      BCF     STATUS, RP0                     ;Selecciono Banco 0
0117   0020           00507         movlb   0
0118   3007           00508         MOVLW   0x07
0119   00A3           00509         MOVWF   Veces                           ;Cargo Variable con 7
011A   3014           00510         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;Solamente los bits D- y D+
011B   1F21           00511         BTFSS   ZLPPend
011C   2BB2           00512         goto    SincUSB10
011D                  00513 SincUSB1
011D   068C           00514         XORWF   GPIO, F                         ;Invierto D- y D+                       {0} [0]
011E   0000           00515         nop                                     ;                                        +  [1]
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

011F   0BA3           00516         DECFSZ  Veces, F                        ;Decremento mi variable...              {1} [2]
0120   291D           00517         GOTO    SincUSB1                        ;Sigo hasta terminar los 7 cambios...   {23}[34]
0121   3010           00518         MOVLW   0x10                            ;                                       {3} [4]
0122   00A3           00519         MOVWF   Veces                           ;Cargo Variable con 16                  {0} [0]
                      00520 ;;;     nop                                     ;                                        +  [1]
0123   3014           00521         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;Solamente los bits D- y D+             {1} [2]
                      00522 ;;;     NOP                                     ;                                       {2} [3]
0124   2925           00523         goto    $+1
0125   1C22           00524         BTFSS   ByteAMandar, 0                  ;Si el bit 0 del Dato a mandar es...    {3} [4]
0126   068C           00525         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
0127   0000           00526         nop                                     ;                                        +  [1]
0128   2929           00527         GOTO    $ + 1                           ;                                       {12}[23]
0129   1CA2           00528         BTFSS   ByteAMandar, 1                  ;Si el bit 1 del Dato a mandar es...    {3} [4]
012A   068C           00529         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
012B   0000           00530         nop                                     ;                                        +  [1]
012C   292D           00531         GOTO    $ + 1                           ;                                       {12}[23]
012D   1D22           00532         BTFSS   ByteAMandar, 2                  ;Si el bit 2 del Dato a mandar es...    {3} [4]
012E   068C           00533         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
012F   0000           00534         nop                                     ;                                        +  [1]
0130   2931           00535         GOTO    $ + 1                           ;                                       {12}[23]
0131   1DA2           00536         BTFSS   ByteAMandar, 3                  ;Si el bit 3 del Dato a mandar es...    {3} [4]
0132   068C           00537         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
0133   0000           00538         nop                                     ;                                        +  [1]
0134   2935           00539         GOTO    $ + 1                           ;                                       {12}[23]
0135   1E22           00540         BTFSS   ByteAMandar, 4                  ;Si el bit 4 del Dato a mandar es...    {3} [4]
0136   068C           00541         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
0137   0000           00542         nop                                     ;                                        +  [1]
0138   2939           00543         GOTO    $ + 1                           ;                                       {12}[23]
0139   1EA2           00544         BTFSS   ByteAMandar, 5                  ;Si el bit 5 del Dato a mandar es...    {3} [4]
013A   068C           00545         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
013B   0000           00546         nop                                     ;                                        +  [1]
013C   293D           00547         GOTO    $ + 1                           ;                                       {12}[23]
013D   1F22           00548         BTFSS   ByteAMandar, 6                  ;Si el bit 6 del Dato a mandar es...    {3} [4]
013E   068C           00549         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
013F   0000           00550         nop                                     ;                                        +  [1]
0140   2941           00551         GOTO    $ + 1                           ;                                       {12}[23]
0141   1FA2           00552         BTFSS   ByteAMandar, 7                  ;Si el bit 7 del Dato a mandar es...    {3} [4]
0142   068C           00553         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
0143   0000           00554         nop                                     ;                                        +  [1]
0144   2945           00555         GOTO    $ + 1                           ;                                       {12}[23]
0145   1720           00556         BSF     Banderas_0, 6                   ;                                       {3} [4]
0146                  00557 ZLP
0146   068C           00558         XORWF   GPIO, F                         ;Zero Length Packet                     {0} [0]
0147   0000           00559         nop                                     ;                                        +  [1]
0148   0BA3           00560         DECFSZ  Veces, F                        ;                                       {1} [2]
0149   2946           00561         GOTO    ZLP                             ;                                       {23}[34]
014A                  00562 ConfEntradas
014A   30EB           00563         MOVLW   ~((1<<DataMenos)|(1<<DataMas))  ;Todo menos D- y D+                     {3} [4]
014B   058C           00564         ANDWF   GPIO, F                         ;                                       {0} [0]
014C   2152           00565         CALL    Espero                          ;Hago tiempo???
                      00566 ;;      BSF     STATUS, RP0                     ;Selecciono Banco 1
014D   0021           00567         movlb   1
014E   3014           00568         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;'00001110' SE0, D+, D- en Tristate
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

014F   048C           00569         IORWF   TRISIO,F                        ;SE0, D+, D- = Entradas
                      00570 ;;      BCF     STATUS, RP0                     ;Selecciono Banco 0
0150   0020           00571         movlb   0
0151   1AA0           00572         btfsc   Setup
0152                  00573 Espero
0152   0008           00574         RETURN
                      00575 
0153   100C           00576         bcf     GPIO,RTS                        ; enable Data from the host
0154   0195           00577         clrf    TMR0                            ; clear timer0
0155   110B           00578         bcf     INTCON,TMR0IF                   ; clear overflow flag
                      00579 
0156                  00580 RcvL:
0156   138B           00581         BCF     INTCON, GIE
0157   190B           00582         btfsc   INTCON,TMR0IF                   ; timeout ?
0158   296A           00583         goto    timeout                         ; yes
                      00584 
0159   198C           00585         btfsc   GPIO,RX                         ; detect Start Bit ?
015A   2956           00586         goto    RcvL                            ; loop
                      00587 
015B   23FA           00588         call    bwait2                          ; wait 1/2 bit and W=9
015C   00FE           00589         movwf   cn                              ; cn=9
015D   0CFF           00590         rrf     rxd,f                           ; get bit data
015E   23F9           00591         call    bwait                           ; wait 1bit and Carry=1
015F   1D8C           00592         btfss   GPIO,RX
0160   1003           00593         bcf     STATUS,C
0161   0BFE           00594         decfsz  cn,f                            ; cn=0?
0162   295D           00595         goto    $-5                             ; loop
                      00596 
0163   178B           00597         BSF     INTCON, GIE
0164   087F           00598         movf    rxd,W                           ;set data
0165   00B4           00599         movwf   Recibido_1
0166   3001           00600         MOVLW   0x01
0167   00F1           00601         MOVWF   Var_3
0168   23DA           00602         call    _PD
0169   1621           00603         BSF     InterruptIN
                      00604 
016A                  00605 timeout:
016A   140C           00606         bsf     GPIO,RTS                        ; disable Data from the host
016B   0008           00607         return
                      00608 
016C                  00609 EscribirUSBDATA
016C   160C           00610         BSF     GPIO, DataMenos                 ;D- en "1"
                      00611 ;;      BSF     STATUS, RP0                     ;Selecciono Banco 1
016D   0021           00612         movlb   1
016E   30EB           00613         MOVLW   ~((1<<DataMenos)|(1<<DataMas))  ;'00001000' Todas salidas menos SE0
016F   058C           00614         ANDWF   TRISIO,F                        ;SE0 Entrada
                      00615 ;;      BCF     STATUS, RP0                     ;Selecciono Banco 0
0170   0020           00616         movlb   0
                      00617 ;1      DECF    Var_2, W
                      00618 ;1      SUBLW   0xFF
                      00619 ;1      MOVWF   TMR0
                      00620 ;1      MOVLW   0xA0
                      00621 ;1      MOVWF   INTCON                          ;Interrupción por desbordamiento de TMR0
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0171   0870           00622         movf    Var_2, W                        ;1
0172   009B           00623         movwf   PR2                             ;1
0173   019A           00624         clrf    TMR2                            ;1
0174   151C           00625         bsf     T2CON,TMR2ON                    ;1                              {0} [0]
0175   3007           00626         MOVLW   0x07                            ;                               {1} [1]
0176   00A3           00627         MOVWF   Veces                           ;Cargo Variable con 7           {2} [2]
0177   3014           00628         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;Solamente los bits D- y D+     {3} [3]
                      00629 ;;;     NOP                                     ;                               {0} [4]
                      00630 ;;;     nop                                     ;                                +  [0]
0178   2979           00631         goto    $+1
0179                  00632 SincUSB2
0179   068C           00633         XORWF   GPIO, F                         ;invierto D- y D+               {1} [1]
017A   0000           00634         nop                                     ;                                +  [2]
017B   0BA3           00635         DECFSZ  Veces, F                        ;                               {2} [3]
017C   2979           00636         GOTO    SincUSB2                        ;                               {30}[40]
017D   3043           00637         MOVLW   RespPID                         ;Registro Indirecto             {0} [0]
017E   0084           00638         MOVWF   FSR                             ;                               {1} [1]
017F   3014           00639         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;Solamente los bits D- y D+     {2} [2]
                      00640 ;;;     NOP                                     ;                               {3} [3]
                      00641 ;;;     nop                                     ;                                +  [4]
0180   2981           00642         goto    $+1
0181   1C00           00643         BTFSS   INDF, 0                         ;                               {0} [0]
0182   068C           00644         XORWF   GPIO, F                         ;..."0" invierto D- y D+        {1} [1]
0183   2984           00645         GOTO    MandarSigByte                   ;                               {23}[23]
0184                  00646 MandarSigByte
0184   0000           00647         nop                                     ;                                        +  [4]
0185   1C80           00648         BTFSS   INDF, 1                         ;Si el bit 1 del Dato a mandar es...    {0} [0]
0186   068C           00649         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
0187   1891           00650         btfsc   PIR1,TMR2IF                     ;                                       {2} [2]
0188   2807           00651         goto    TMovf                           ;                                       {3} [3]
0189   0000           00652         nop                                     ;                                        +  [4]
018A   1D00           00653         BTFSS   INDF, 2                         ;Si el bit 2 del Dato a mandar es...    {0} [0]
018B   068C           00654         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
018C   1891           00655         btfsc   PIR1,TMR2IF                     ;                                       {2} [2]
018D   2807           00656         goto    TMovf                           ;                                       {3} [3]
018E   0000           00657         nop                                     ;                                        +  [4]
018F   1D80           00658         BTFSS   INDF, 3                         ;Si el bit 3 del Dato a mandar es...    {0} [0]
0190   068C           00659         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
0191   1891           00660         btfsc   PIR1,TMR2IF                     ;                                       {2} [2]
0192   2807           00661         goto    TMovf                           ;                                       {3} [3]
0193   0000           00662         nop                                     ;                                        +  [4]
0194   1E00           00663         BTFSS   INDF, 4                         ;Si el bit 4 del Dato a mandar es...    {0} [0]
0195   068C           00664         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
0196   1891           00665         btfsc   PIR1,TMR2IF                     ;                                       {2} [2]
0197   2807           00666         goto    TMovf                           ;                                       {3} [3]
0198   0000           00667         nop                                     ;                                        +  [4]
0199   1E80           00668         BTFSS   INDF, 5                         ;Si el bit 5 del Dato a mandar es...    {0} [0]
019A   068C           00669         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
019B   1891           00670         btfsc   PIR1,TMR2IF                     ;                                       {2} [2]
019C   2807           00671         goto    TMovf                           ;                                       {3} [3]
019D   0000           00672         nop                                     ;                                        +  [4]
019E   1F00           00673         BTFSS   INDF, 6                         ;Si el bit 6 del Dato a mandar es...    {0} [0]
019F   068C           00674         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A0   1891           00675         btfsc   PIR1,TMR2IF                     ;                                       {2} [2]
01A1   2807           00676         goto    TMovf                           ;                                       {3} [3]
01A2   0000           00677         nop                                     ;                                        +  [4]
01A3   1F80           00678         BTFSS   INDF, 7                         ;Si el bit 7 del Dato a mandar es...    {0} [0]
01A4   068C           00679         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
01A5   0A84           00680         INCF    FSR, F                          ;                                       {2} [2]
                      00681 ;;;     NOP                                     ;                                       {3} [3]
                      00682 ;;;     nop                                     ;                                        +  [4]
01A6   29A7           00683         goto    $+1
01A7   1C00           00684         BTFSS   INDF, 0                         ;Si el bit 0 del Dato a mandar es...    {0} [0]
01A8   068C           00685         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {1} [1]
01A9   2984           00686         GOTO    MandarSigByte                           ;                               {23}[23]
                      00687 
01AA                  00688 DesencriptarNRZI
01AA   3033           00689         MOVLW   PID                             ;Cargo la dirección del primer paquete recibido (PID) NR
                            ZI
01AB   0084           00690         MOVWF   FSR                             ;en el registro indirecto para pasarlos a binario...
01AC   0831           00691         MOVFW   BytesRecibidos
01AD   00F2           00692         MOVWF   Var_4
01AE   1403           00693         BSF     STATUS, C                       ;Cargo el Carry con "1"
01AF                  00694 SigNRZI
01AF   0D00           00695         RLF     INDF, W
01B0   0680           00696         XORWF   INDF, F
01B1   0980           00697         COMF    INDF, F
01B2   0A84           00698         INCF    FSR, F
01B3   0BF2           00699         DECFSZ  Var_4, F                        ;Desencripto siguente registro NRZI recibido...
01B4   29AF           00700         GOTO    SigNRZI
01B5   3033           00701         MOVLW   PID                             ;PID Indirecto
01B6   00F3           00702         MOVWF   Var_5
01B7   3033           00703         MOVLW   PID                             ;PID Indirecto
01B8   00F2           00704         MOVWF   Var_4
01B9   0084           00705         MOVWF   FSR
01BA   0831           00706         MOVFW   BytesRecibidos
01BB   00C4           00707         MOVWF   Resp_0                          ;Uso el buffer de repuesta como variable...
01BC   01C3           00708         CLRF    RespPID
01BD   01F4           00709         CLRF    Var_6
01BE   01F5           00710         CLRF    Var_7
01BF   01F6           00711         CLRF    Var_8
01C0   01F7           00712         CLRF    Var_9
01C1                  00713 Label_0
01C1   0C80           00714         RRF     INDF, F                         ;Exraigo el bit menos significativo...
01C2   0CF4           00715         RRF     Var_6, F                        ;Lo inserto por la izquierda...
01C3   0AF6           00716         INCF    Var_8, F                        ;Cuento el bit...
01C4   1074           00717         BCF     Var_6, 0
01C5   307E           00718         MOVLW   0x7E
01C6   0674           00719         XORWF   Var_6, W
01C7   1903           00720         BTFSC   STATUS, Z
01C8   29D7           00721         GOTO    Label_2
01C9   0D74           00722         RLF     Var_6, W
01CA   0CF5           00723         RRF     Var_7, F
01CB   0AF7           00724         INCF    Var_9, F
01CC   19F7           00725         BTFSC   Var_9, 3
01CD   21DD           00726         CALL    Label_3
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01CE                  00727 Label_1
01CE   1DF6           00728         BTFSS   Var_8, 3
01CF   29C1           00729         GOTO    Label_0
01D0   01F6           00730         CLRF    Var_8
01D1   0AF2           00731         INCF    Var_4, F
01D2   0872           00732         MOVFW   Var_4
01D3   0084           00733         MOVWF   FSR
01D4   0BC4           00734         DECFSZ  Resp_0, F                       ;Uso el buffer de repuesta como variable...
01D5   29C1           00735         GOTO    Label_0
01D6   3400           00736         RETLW   0x00
01D7                  00737 Label_2
01D7   0AC3           00738         INCF    RespPID, F                      ;Uso el buffer de repuesta como variable... Incremento v
                            ariable...
01D8   1DC3           00739         BTFSS   RespPID, 3                      ;Fueron 8 veces?
01D9   29CE           00740         GOTO    Label_1                         ;No
01DA   03B1           00741         DECF    BytesRecibidos, F
01DB   01C3           00742         CLRF    RespPID                         ;Limpio variable...
01DC   29CE           00743         GOTO    Label_1
                      00744 
01DD                  00745 Label_3
01DD   01F7           00746         CLRF    Var_9
01DE   0873           00747         MOVFW   Var_5
01DF   0084           00748         MOVWF   FSR
01E0   0875           00749         MOVFW   Var_7
01E1   0080           00750         MOVWF   INDF
01E2   0AF3           00751         INCF    Var_5, F
01E3   0872           00752         MOVFW   Var_4
01E4   0084           00753         MOVWF   FSR
01E5   0008           00754         RETURN
                      00755 
01E6                  00756 CalcularCRC16
01E6   0A84           00757         INCF    FSR, F
01E7   0871           00758         MOVFW   Var_3
01E8   00F6           00759         MOVWF   Var_8
01E9   30FF           00760         MOVLW   0xFF
01EA   00F2           00761         MOVWF   Var_4
01EB   00F3           00762         MOVWF   Var_5
01EC   0800           00763         MOVFW   INDF
01ED   00F4           00764         MOVWF   Var_6
01EE   3008           00765         MOVLW   0x08
01EF   00F5           00766         MOVWF   Var_7
01F0                  00767 Label_4
01F0   0800           00768         MOVFW   INDF
01F1   0672           00769         XORWF   Var_4, W
01F2   00F4           00770         MOVWF   Var_6
01F3   0873           00771         MOVFW   Var_5
01F4   00F2           00772         MOVWF   Var_4
01F5   01F5           00773         CLRF    Var_7
01F6   1003           00774         BCF     STATUS, C
01F7   0C74           00775         RRF     Var_6, W
01F8   06F4           00776         XORWF   Var_6, F
01F9   0CF5           00777         RRF     Var_7, F
01FA   0C74           00778         RRF     Var_6, W
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01FB   00F3           00779         MOVWF   Var_5
01FC   0CF5           00780         RRF     Var_7, F
01FD   0DF4           00781         RLF     Var_6, F
01FE   06F4           00782         XORWF   Var_6, F
01FF   0E74           00783         SWAPF   Var_6, W
0200   06F4           00784         XORWF   Var_6, F
0201   0875           00785         MOVFW   Var_7
0202   18F4           00786         BTFSC   Var_6, 1
0203   3A01           00787         XORLW   0x01
0204   06F2           00788         XORWF   Var_4, F
0205   30C0           00789         MOVLW   0xC0
0206   18F4           00790         BTFSC   Var_6, 1
0207   06F3           00791         XORWF   Var_5, F
0208   0A84           00792         INCF    FSR, F
0209   0BF6           00793         DECFSZ  Var_8, F
020A   29F0           00794         GOTO    Label_4
020B   09F2           00795         COMF    Var_4, F
020C   09F3           00796         COMF    Var_5, F
020D   3400           00797         RETLW   0x00
                      00798 
020E                  00799 InsertarCRC16
020E   0872           00800         MOVFW   Var_4
020F   0080           00801         MOVWF   INDF
0210   0A84           00802         INCF    FSR, F
0211   0873           00803         MOVFW   Var_5
0212   0080           00804         MOVWF   INDF
0213   3002           00805         MOVLW   0x02
0214   07F1           00806         ADDWF   Var_3, F
0215   3400           00807         RETLW   0x00
                      00808 
0216                  00809 InsertarBitStuffing
0216   3043           00810         MOVLW   RespPID                         ;Registro Indirecto
0217   00F3           00811         MOVWF   Var_5
0218   3033           00812         MOVLW   PID
0219   00F2           00813         MOVWF   Var_4
021A   0084           00814         MOVWF   FSR
021B   01F4           00815         CLRF    Var_6
021C   01F5           00816         CLRF    Var_7
021D   01F6           00817         CLRF    Var_8
021E   0871           00818         MOVFW   Var_3
021F   00F7           00819         MOVWF   Var_9
0220   01F0           00820         CLRF    Var_2
0221                  00821 Label_5
0221   0C80           00822         RRF     INDF, F
0222   0AF5           00823         INCF    Var_7, F
0223   0CF4           00824         RRF     Var_6, F
0224   0AF6           00825         INCF    Var_8, F
0225   19F6           00826         BTFSC   Var_8, 3
0226   2249           00827         CALL    Label_9
0227   30FC           00828         MOVLW   0xFC
0228   0274           00829         SUBWF   Var_6, W
0229   1803           00830         BTFSC   STATUS, C
022A   222E           00831         CALL    Label_6
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

022B   19F5           00832         BTFSC   Var_7, 3
022C   2A35           00833         GOTO    Label_7
022D   2A21           00834         GOTO    Label_5
                      00835 
022E                  00836 Label_6
022E   1003           00837         BCF     STATUS, C
022F   0CF4           00838         RRF     Var_6, F
0230   0AF6           00839         INCF    Var_8, F
0231   19F6           00840         BTFSC   Var_8, 3
0232   2249           00841         CALL    Label_9
0233   0AF0           00842         INCF    Var_2, F
0234   0008           00843         RETURN
0235                  00844 Label_7
0235   01F5           00845         CLRF    Var_7
0236   0AF2           00846         INCF    Var_4, F
0237   0872           00847         MOVFW   Var_4
0238   0084           00848         MOVWF   FSR
0239   0BF7           00849         DECFSZ  Var_9, F
023A   2A21           00850         GOTO    Label_5
023B   1003           00851         BCF     STATUS, C
023C                  00852 Label_8
023C   0CF4           00853         RRF     Var_6, F
023D   0AF6           00854         INCF    Var_8, F
023E   1DF6           00855         BTFSS   Var_8, 3
023F   2A3C           00856         GOTO    Label_8
0240   2249           00857         CALL    Label_9
0241   0871           00858         MOVFW   Var_3
0242   00F7           00859         MOVWF   Var_9
0243   1003           00860         BCF     STATUS, C
0244   0DF7           00861         RLF     Var_9, F
0245   0DF7           00862         RLF     Var_9, F
0246   0D77           00863         RLF     Var_9, W
0247   07F0           00864         ADDWF   Var_2, F
0248   3400           00865         RETLW   0x00
                      00866 
0249                  00867 Label_9
0249   01F6           00868         CLRF    Var_8
024A   0873           00869         MOVFW   Var_5
024B   0084           00870         MOVWF   FSR
024C   0874           00871         MOVFW   Var_6
024D   0080           00872         MOVWF   INDF
024E   0AF3           00873         INCF    Var_5, F
024F   0872           00874         MOVFW   Var_4
0250   0084           00875         MOVWF   FSR
0251   0008           00876         RETURN
                      00877 
0252                  00878 ContTabla
0252   0840           00879         MOVFW   Var_0
0253   0441           00880         IORWF   Var_1, W
0254   1903           00881         BTFSC   STATUS, Z
0255   28CA           00882         GOTO    ZLPPendiente
0256   15A0           00883         BSF     Ocupado
0257   108B           00884         BCF     INTCON, INTF
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0258   178B           00885         BSF     INTCON, GIE
0259                  00886 LeerDescriptor
0259   3034           00887         MOVLW   Recibido_1                      ;Address Indirecto
025A   0084           00888         MOVWF   FSR
025B   01F1           00889         CLRF    Var_3                           ;Limpio registro contador (principio de la tabla)
025C                  00890 SiguienteDatoTabla
025C   22F0           00891         CALL    LevantarTabla
025D   0080           00892         MOVWF   INDF
025E   0AF1           00893         INCF    Var_3, F                        ;Incremento contador...
025F   0A84           00894         INCF    FSR, F                          ;Incremento Dirección de registro indirecto
0260   0AC2           00895         INCF    Posicion, F
0261   0BC0           00896         DECFSZ  Var_0, F
0262   19F1           00897         BTFSC   Var_3, 3
0263   2A65           00898         GOTO    PrepararDescriptor              ;SI!
0264   2A5C           00899         GOTO    SiguienteDatoTabla
                      00900 
0265                  00901 PrepararDescriptor
                      00902 ;;;     MOVLW   PID
                      00903 ;;;     MOVWF   FSR
                      00904 ;;;     MOVLW   0x4B                            ;'01001011' DATA1
                      00905 ;;;     BTFSS   Data1
                      00906 ;;;     MOVLW   0xC3                            ;'11000011' DATA0
                      00907 ;;;     MOVWF   INDF
                      00908 ;;;     BCF     Data1
                      00909 ;;;     BTFSS   INDF, 3
                      00910 ;;;     BSF     Data1
                      00911 ;;;     CALL    CalcularCRC16
                      00912 ;;;     CALL    InsertarCRC16
                      00913 ;;;     INCF    Var_3, F
                      00914 ;;;     CALL    InsertarBitStuffing
                      00915 ;;;     MOVLW   0x08
                      00916 ;;;     ADDWF   Var_2, F
0265   23DA           00917         call    _PD
0266   15A1           00918         BSF     INPend
0267   2821           00919         GOTO    EsperoContinuacion
                      00920 
0268                  00921 ProcesarSetup
0268   14A1           00922         BSF     Data1                           ;Respuesta a (Setup + Data0) = Data1
0269   0834           00923         MOVFW   Recibido_1                      ;Cargo Address en W
026A   3960           00924         ANDLW   0x60                            ;Standard Request (Bit5 y Bit6 en "0")
026B   1903           00925         BTFSC   STATUS, Z                       ;Si los bits 5 y 6 de Recibido_1 son igual a 0 es Standa
                            rd Request
026C   2A7B           00926         GOTO    IdentificarStdReq
026D   0835           00927         MOVFW   Recibido_2
026E   3A01           00928         XORLW   0x01                            ;CLEAR_FEATURE no Standard Request
026F   1903           00929         BTFSC   STATUS, Z                       ;Si Recibido_2 es igual a CLEAR_FEATURE...
0270   2AE9           00930         GOTO    bReqNS
0271   0835           00931         MOVFW   Recibido_2
0272   3A09           00932         XORLW   0x09                            ;SET_CONFIGURATION no Standard Request
0273   1903           00933         BTFSC   STATUS, Z                       ;Si Recibido_2 es igual a SET_CONFIGURATION...
0274   2AE9           00934         GOTO    bReqNS
0275   0835           00935         MOVFW   Recibido_2
0276   3A0A           00936         XORLW   0x0A                            ;GET_INTERFACE no Standard Request
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0277   1903           00937         BTFSC   STATUS, Z                       ;Si Recibido_2 es igual a GET_INTERFACE...
0278   2AEA           00938         GOTO    GINSR
0279   16A1           00939         BSF     Stall                           ;Levanto bandera de STALL (atascado)
027A   2821           00940         GOTO    EsperoContinuacion
                      00941 
027B                  00942 IdentificarStdReq
027B   0835           00943         MOVFW   Recibido_2                      ;Cargo en W Recibido_2
027C   000B           00944         brw                                     ;Se lo agrego a PCL
                      00945 
027D   2A8A           00946         GOTO    GET_STATUS                      ;GET_STATUS
027E   2A90           00947         GOTO    CLEAR_FEATURE                   ;CLEAR_FEATURE
027F   2821           00948         GOTO    EsperoContinuacion              ;Reserved for future use
0280   2A92           00949         GOTO    SET_FEATURE                     ;SET_FEATURE
0281   2821           00950         GOTO    EsperoContinuacion              ;Reserved for future use
0282   2A94           00951         GOTO    SET_ADDRESS                     ;SET_ADDRESS
0283   2AA3           00952         GOTO    GET_SET_DESCRIPTOR              ;GET_DESCRIPTOR
0284   2AA3           00953         GOTO    GET_SET_DESCRIPTOR              ;SET_DESCRIPTOR
0285   2ADC           00954         GOTO    GET_CONFIGURATION               ;GET_CONFIGURATION
0286   2ADF           00955         GOTO    SET_CONFIGURATION               ;SET_CONFIGURATION
0287   2AE3           00956         GOTO    GET_INTERFACE                   ;GET_INTERFACE
0288   2AE7           00957         GOTO    SET_INTERFACE                   ;SET_INTERFACE
0289   2AE8           00958         GOTO    SYNCH_FRAME                     ;SYNCH_FRAME
                      00959 
028A                  00960 GET_STATUS
028A   01B4           00961         CLRF    Recibido_1
028B   01B5           00962         CLRF    Recibido_2
028C   1920           00963         BTFSC   Banderas_0, 2
028D   1434           00964         BSF     Recibido_1, 0
028E   3002           00965         MOVLW   0x02
                      00966 ;;;     MOVWF   Var_3
                      00967 ;;;     GOTO    PrepararDescriptor
028F   2AE5           00968         goto    _GI2
                      00969 
0290                  00970 CLEAR_FEATURE
0290   1120           00971         BCF     Banderas_0, 2
0291   28CA           00972         GOTO    ZLPPendiente
                      00973 
0292                  00974 SET_FEATURE
0292   1520           00975         BSF     Banderas_0, 2
0293   28CA           00976         GOTO    ZLPPendiente
                      00977 
0294                  00978 SET_ADDRESS
0294   0836           00979         MOVFW   Recibido_3
0295   00B2           00980         MOVWF   NuevoAddress
0296   01F2           00981         CLRF    Var_4
0297   15F2           00982         BSF     Var_4, 3
0298   1403           00983         BSF     STATUS, C
0299                  00984 AddressNRZI
0299   3080           00985         MOVLW   0x80
029A   0CB2           00986         RRF     NuevoAddress, F
029B   1C03           00987         BTFSS   STATUS, C
029C   06B2           00988         XORWF   NuevoAddress, F
029D   0D32           00989         RLF     NuevoAddress, W
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

029E   0BF2           00990         DECFSZ  Var_4, F
029F   2A99           00991         GOTO    AddressNRZI
02A0   13B2           00992         BCF     NuevoAddress, 7
02A1   1421           00993         BSF     AsignAddress
02A2   28CA           00994         GOTO    ZLPPendiente
                      00995 
02A3                  00996 GET_SET_DESCRIPTOR
02A3   083A           00997         MOVFW   Recibido_7
02A4   00C0           00998         MOVWF   Var_0
02A5   083B           00999         MOVFW   Recibido_8
02A6   00C1           01000         MOVWF   Var_1
02A7   30FF           01001         MOVLW   0xFF
02A8   08BB           01002         MOVF    Recibido_8, F
02A9   1903           01003         BTFSC   STATUS, Z                       ;Me fijo si Recibido_8 es distinto de "0"
02AA   083A           01004         MOVFW   Recibido_7                      ;Es igual a "0", Cargo W con Recibido_7
02AB   00F2           01005         MOVWF   Var_4
02AC   0837           01006         MOVFW   Recibido_4
02AD   3A21           01007         XORLW   0x21
02AE   1903           01008         BTFSC   STATUS, Z                       ;Si Recibido_4 es igual a 0x21...
02AF   2AC2           01009         GOTO    Mandar_HID_Descriptor           ;Es igual a 0x21, Mando Descriptor (HID)
02B0   0837           01010         MOVFW   Recibido_4
02B1   3A22           01011         XORLW   0x22
02B2   1903           01012         BTFSC   STATUS, Z                       ;Si Recibido_4 es igual a 0x22...
02B3   2AC6           01013         GOTO    Mandar_HIDReport_Descriptor     ;Es igual a 0x22, Mando HID Report Descriptor
02B4   0837           01014         MOVFW   Recibido_4                      ;Cargo en W Recibido_4
02B5   000B           01015         brw                                     ;Se lo agrego a PCL
02B6   2821           01016         GOTO    EsperoContinuacion              ;Posición de PC = 2B3 (PCLATH = 0x02) (PCL = 0xB3)
02B7   2ABA           01017         GOTO    Mandar_DEVICE_Descriptor
02B8   2ABE           01018         GOTO    Mandar_CONFIGURATION_Descriptor
02B9   2ACA           01019         GOTO    Mandar_STRING_Descriptors
                      01020 
02BA                  01021 Mandar_DEVICE_Descriptor
02BA   3012           01022         MOVLW   0x12                            ;Tamaño del Descriptor (18 Bytes)
02BB   22EB           01023         CALL    Label_A
02BC   3000           01024         MOVLW   0x00                            ;Posición del Descriptor (0)
                      01025 ;;;     MOVWF   Posicion
                      01026 ;;;     GOTO    LeerDescriptor
02BD   2ADA           01027         goto    _SD2
                      01028 
02BE                  01029 Mandar_CONFIGURATION_Descriptor
02BE   3029           01030         MOVLW   0x29                            ;Tamaño del Descriptor (41 Bytes)
02BF   22EB           01031         CALL    Label_A
02C0   3012           01032         MOVLW   0x12                            ;Posición del Descriptor (18)
                      01033 ;;;     MOVWF   Posicion
                      01034 ;;;     GOTO    LeerDescriptor
02C1   2ADA           01035         goto    _SD2
                      01036 
02C2                  01037 Mandar_HID_Descriptor
02C2   3009           01038         MOVLW   0x09                            ;Tamaño del Descriptor (9 Bytes)
02C3   22EB           01039         CALL    Label_A
02C4   3024           01040         MOVLW   0x24                            ;Posición del Descriptor (36)
                      01041 ;;;     MOVWF   Posicion
                      01042 ;;;     GOTO    LeerDescriptor
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02C5   2ADA           01043         goto    _SD2
                      01044 
02C6                  01045 Mandar_HIDReport_Descriptor
02C6   3019           01046         MOVLW   0x19                            ;Tamaño del Descriptor (25 Bytes)
02C7   22EB           01047         CALL    Label_A
02C8   303B           01048         MOVLW   0x3B                            ;Posición del Descriptor (59)
                      01049 ;;;     MOVWF   Posicion
                      01050 ;;;     GOTO    LeerDescriptor
02C9   2ADA           01051         goto    _SD2
                      01052 
02CA                  01053 Mandar_STRING_Descriptors
02CA   0836           01054         MOVFW   Recibido_3                      ;Cargo en W Recibido_3
02CB   000B           01055         brw                                     ;Se lo agrego a PCL
02CC   2ACF           01056         GOTO    StringDescriptor0               ;Posición de PC = 2D3 (PCLATH = 0x02) (PCL = 0xD3)
02CD   2AD3           01057         GOTO    StringDescriptor1
02CE   2AD7           01058         GOTO    StringDescriptor2
                      01059 
02CF                  01060 StringDescriptor0
02CF   3004           01061         MOVLW   0x04                            ;Tamaño 4 Bytes (String Descriptor)
02D0   22EB           01062         CALL    Label_A
02D1   3054           01063         MOVLW   0x54                            ;Posición en la tabla (84)...
                      01064 ;;;     MOVWF   Posicion
                      01065 ;;;     GOTO    LeerDescriptor
02D2   2ADA           01066         goto    _SD2
                      01067 
02D3                  01068 StringDescriptor1
02D3   3012           01069         MOVLW   0x12                            ;Tamaño 18 Bytes (String Descriptor)
02D4   22EB           01070         CALL    Label_A
02D5   3058           01071         MOVLW   0x58                            ;Posición en la tabla (88)...
                      01072 ;;;     MOVWF   Posicion
                      01073 ;;;     GOTO    LeerDescriptor
02D6   2ADA           01074         goto    _SD2
                      01075 
02D7                  01076 StringDescriptor2
02D7   3056           01077         MOVLW   0x56                            ;Tamaño 86 Bytes (String Descriptor)
02D8   22EB           01078         CALL    Label_A
02D9   306A           01079         MOVLW   0x6A                            ;Posición en la tabla (106)...
02DA                  01080 _SD2
02DA   00C2           01081         MOVWF   Posicion
02DB   2A59           01082         GOTO    LeerDescriptor
                      01083 
02DC                  01084 GET_CONFIGURATION
02DC   0832           01085         MOVFW   NuevoAddress
02DD   00B4           01086         MOVWF   Recibido_1
                      01087 ;;;     MOVLW   0x01
                      01088 ;;;     MOVWF   Var_3
                      01089 ;;;     GOTO    PrepararDescriptor
02DE   2AE4           01090         goto    _GI1
                      01091 
02DF                  01092 SET_CONFIGURATION
02DF   0836           01093         MOVFW   Recibido_3
02E0   00B2           01094         MOVWF   NuevoAddress
02E1   14A0           01095         BSF     Banderas_0, 1
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02E2   28CA           01096         GOTO    ZLPPendiente
                      01097 
02E3                  01098 GET_INTERFACE
02E3   01B4           01099         CLRF    Recibido_1
02E4                  01100 _GI1
02E4   3001           01101         MOVLW   0x01
02E5                  01102 _GI2
02E5   00F1           01103         MOVWF   Var_3
02E6   2A65           01104         GOTO    PrepararDescriptor
                      01105 
02E7                  01106 SET_INTERFACE
02E7   28CA           01107         GOTO    ZLPPendiente
                      01108 
02E8                  01109 SYNCH_FRAME
02E8   2821           01110         GOTO    EsperoContinuacion
                      01111 
02E9                  01112 bReqNS
02E9   2821           01113         GOTO    EsperoContinuacion
                      01114 
02EA                  01115 GINSR
02EA   28CA           01116         GOTO    ZLPPendiente
                      01117 
02EB                  01118 Label_A
02EB   02F2           01119         SUBWF   Var_4, F
02EC   1C03           01120         BTFSS   STATUS, C
02ED   083A           01121         MOVFW   Recibido_7
02EE   00C0           01122         MOVWF   Var_0
02EF   0008           01123         RETURN
                      01124 
02F0                  01125 LevantarTabla
02F0   0842           01126         MOVFW   Posicion                        ;Cargo Posicion en W
02F1   000B           01127         brw                                     ;Se lo agrego a PCL
                      01128 
02F2   3412           01129         RETLW   0x12                            ;1 Size of this descriptor in bytes     Posición de PC =
                             306
02F3   3401           01130         RETLW   0x01                            ;2 Descriptor Type (1 = DEVICE)
02F4   3410           01131         RETLW   0x10                            ;3 (This field identifies the release of the USB Specifi
                            cation 
02F5   3401           01132         RETLW   0x01                            ;4 with which the device and its descriptors are complia
                            nt.)
02F6   3400           01133         RETLW   0x00                            ;5 Class code (assigned by the USB-IF).
02F7   3400           01134         RETLW   0x00                            ;6 Subclass code (assigned by the USB-IF).
02F8   3400           01135         RETLW   0x00                            ;7 Protocol code (assigned by the USB-IF).
02F9   3408           01136         RETLW   0x08                            ;8 Maximum packet size for endpoint zero
02FA   34D8           01137         RETLW   0xD8                            ;9 Vendor ID (assigned by the USB-IF) Low
02FB   3404           01138         RETLW   0x04                            ;10 Vendor ID (assigned by the USB-IF) High
02FC   3428           01139         RETLW   0x28                            ;11 Product ID (assigned by the manufacturer) Low
02FD   3406           01140         RETLW   0x06                            ;12 Product ID (assigned by the manufacturer) High
02FE   3416           01141         RETLW   0x16                            ;13 Device release number in binary-coded decimal Low
02FF   3408           01142         RETLW   0x08                            ;14 Device release number in binary-coded decimal High
0300   3401           01143         RETLW   0x01                            ;15 Index of string descriptor describing manufacturer
0301   3402           01144         RETLW   0x02                            ;16 Index of string descriptor describing product
0302   3400           01145         RETLW   0x00                            ;17 Index of string descriptor describing the devices s
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            erial number
0303   3401           01146         RETLW   0x01                            ;18 Number of possible configurations
                      01147 
0304   3409           01148         RETLW   0x09                            ;1 Size of this descriptor in bytes
0305   3402           01149         RETLW   0x02                            ;2 Descriptor Type (2 = CONFIGURATION)
0306   3429           01150         RETLW   0x29                            ;3 wTotalLength Low
0307   3400           01151         RETLW   0x00                            ;4 wTotalLength High
0308   3401           01152         RETLW   0x01                            ;5 bNumInterfaces
0309   3401           01153         RETLW   0x01                            ;6 bConfigurationValue
030A   3400           01154         RETLW   0x00                            ;7 Index of string descriptor describing this configurat
                            ion
030B   3480           01155         RETLW   0x80                            ;8 bmAttributes
030C   3432           01156         RETLW   0x32                            ;9 bMaxPower
                      01157                                                 
030D   3409           01158         RETLW   0x09                            ;1 Size of this descriptor in bytes
030E   3404           01159         RETLW   0x04                            ;2 Descriptor Type (4 = INTERFACE)
030F   3400           01160         RETLW   0x00                            ;3 bInterfaceNumber
0310   3400           01161         RETLW   0x00                            ;4 bAlternateSetting
0311   3402           01162         RETLW   0x02                            ;5 bNumEndpoints
0312   3403           01163         RETLW   0x03                            ;6 bInterfaceClass
0313   3400           01164         RETLW   0x00                            ;7 bInterfaceSubClass
0314   3400           01165         RETLW   0x00                            ;8 bInterfaceProtocol
0315   3400           01166         RETLW   0x00                            ;9 iInterface
                      01167 
0316   3409           01168         RETLW   0x09                            ;1 Size of this descriptor in bytes
0317   3421           01169         RETLW   0x21                            ;2 Descriptor Type (21 = HID)
0318   3400           01170         RETLW   0x00                            ;3 HID Class Specification release number in binary Low
0319   3401           01171         RETLW   0x01                            ;4 HID Class Specification release number in binary High
031A   3400           01172         RETLW   0x00                            ;5 Hardware target country
031B   3401           01173         RETLW   0x01                            ;6 Number of HID class descriptors to follow
031C   3422           01174         RETLW   0x22                            ;7 Report Type Descriptor
031D   3419           01175         RETLW   0x19                            ;8 Total length of Report descriptor Low
031E   3400           01176         RETLW   0x00                            ;9 Total length of Report descriptor High
                      01177 
031F   3407           01178         RETLW   0x07                            ;1 Size of this descriptor in bytes
0320   3405           01179         RETLW   0x05                            ;2 Descriptor Type (5 = ENDPOINT)
0321   3481           01180         RETLW   0x81                            ;3 bEndpointAddress (Bit 7: 1 IN, Bits 0..3 = 1 Endpoint
                             Address 1)
0322   3403           01181         RETLW   0x03                            ;4 bmAttributes (3 = INTERRUPT TRANSFER)
0323   3408           01182         RETLW   0x08                            ;5 wMaxPacketSize Low
0324   3400           01183         RETLW   0x00                            ;6 wMaxPacketSize High
0325   340A           01184         RETLW   0x0A                            ;7 bInterval
                      01185 
0326   3407           01186         RETLW   0x07                            ;1 Size of this descriptor in bytes
0327   3405           01187         RETLW   0x05                            ;2 Descriptor Type (5 = ENDPOINT)
0328   3401           01188         RETLW   0x01                            ;3 bEndpointAddress (Bit 7: 0 OUT, Bits 0..3 = 1 Endpoin
                            t Address 1)
0329   3403           01189         RETLW   0x03                            ;4 bmAttributes (3 = INTERRUPT TRANSFER)
032A   3408           01190         RETLW   0x08                            ;5 wMaxPacketSize Low
032B   3400           01191         RETLW   0x00                            ;6 wMaxPacketSize High
032C   340A           01192         RETLW   0x0A                            ;7 bInterval
                      01193 
032D   3406           01194         RETLW   0x06                            ;1 HID Report Descriptor
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

032E   34A0           01195         RETLW   0xA0                            ;2
032F   34FF           01196         RETLW   0xFF                            ;3
0330   3409           01197         RETLW   0x09                            ;4
0331   3401           01198         RETLW   0x01                            ;5
0332   34A1           01199         RETLW   0xA1                            ;6
0333   3401           01200         RETLW   0x01                            ;7
0334   3409           01201         RETLW   0x09                            ;8
0335   3403           01202         RETLW   0x03                            ;9
0336   3415           01203         RETLW   0x15                            ;10
0337   3400           01204         RETLW   0x00                            ;11
0338   3426           01205         RETLW   0x26                            ;12
0339   34FF           01206         RETLW   0xFF                            ;13
033A   3400           01207         RETLW   0x00                            ;14
033B   3475           01208         RETLW   0x75                            ;15
033C   3408           01209         RETLW   0x08                            ;16
033D   3495           01210         RETLW   0x95                            ;17
033E   3401           01211         RETLW   0x01                            ;18
033F   3481           01212         RETLW   0x81                            ;19
0340   3402           01213         RETLW   0x02                            ;20
0341   3409           01214         RETLW   0x09                            ;21
0342   3404           01215         RETLW   0x04                            ;22
0343   3491           01216         RETLW   0x91                            ;23
0344   3402           01217         RETLW   0x02                            ;24
0345   34C0           01218         RETLW   0xC0                            ;25
                      01219 
0346   3404           01220         RETLW   0x04                            ;1 String Descriptors
0347   3403           01221         RETLW   0x03                            ;2
0348   3409           01222         RETLW   0x09                            ;3
0349   3404           01223         RETLW   0x04                            ;4
                      01224 
034A   3412           01225         RETLW   0x12                            ;1
034B   3403           01226         RETLW   0x03                            ;2
034C   3444           01227         RETLW   0x44                            ;3
034D   3400           01228         RETLW   0x00                            ;4
034E   344D           01229         RETLW   0x4D                            ;5
034F   3400           01230         RETLW   0x00                            ;6
0350   344C           01231         RETLW   0x4C                            ;7
0351   3400           01232         RETLW   0x00                            ;8
0352   3440           01233         RETLW   0x40                            ;9
0353   3400           01234         RETLW   0x00                            ;10
0354   3432           01235         RETLW   0x32                            ;11
0355   3400           01236         RETLW   0x00                            ;12
0356   3430           01237         RETLW   0x30                            ;13
0357   3400           01238         RETLW   0x00                            ;14
0358   3431           01239         RETLW   0x31                            ;15
0359   3400           01240         RETLW   0x00                            ;16
035A   3433           01241         RETLW   0x33                            ;17
035B   3400           01242         RETLW   0x00                            ;18
                      01243 
035C   3456           01244         RETLW   0x56                            ;1
035D   3403           01245         RETLW   0x03                            ;2
035E   3443           01246         RETLW   0x43                            ;3
035F   3400           01247         RETLW   0x00                            ;4
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0360   346F           01248         RETLW   0x6F                            ;5
0361   3400           01249         RETLW   0x00                            ;6
0362   346E           01250         RETLW   0x6E                            ;7
0363   3400           01251         RETLW   0x00                            ;8
0364   3465           01252         RETLW   0x65                            ;9
0365   3400           01253         RETLW   0x00                            ;10
0366   3463           01254         RETLW   0x63                            ;11
0367   3400           01255         RETLW   0x00                            ;12
0368   3463           01256         RETLW   0x63                            ;13
0369   3400           01257         RETLW   0x00                            ;14
036A   3469           01258         RETLW   0x69                            ;15
036B   3400           01259         RETLW   0x00                            ;16
036C   34F3           01260         RETLW   0xF3                            ;17
036D   3400           01261         RETLW   0x00                            ;18
036E   346E           01262         RETLW   0x6E                            ;19
036F   3400           01263         RETLW   0x00                            ;20
0370   3420           01264         RETLW   0x20                            ;21
0371   3400           01265         RETLW   0x00                            ;22
0372   3455           01266         RETLW   0x55                            ;23
0373   3400           01267         RETLW   0x00                            ;24
0374   3453           01268         RETLW   0x53                            ;25
0375   3400           01269         RETLW   0x00                            ;26
0376   3442           01270         RETLW   0x42                            ;27
0377   3400           01271         RETLW   0x00                            ;28
0378   3420           01272         RETLW   0x20                            ;29
0379   3400           01273         RETLW   0x00                            ;30
037A   3461           01274         RETLW   0x61                            ;31
037B   3400           01275         RETLW   0x00                            ;32
037C   3474           01276         RETLW   0x74                            ;33
037D   3400           01277         RETLW   0x00                            ;34
037E   3472           01278         RETLW   0x72                            ;35
037F   3400           01279         RETLW   0x00                            ;36
0380   3461           01280         RETLW   0x61                            ;37
0381   3400           01281         RETLW   0x00                            ;38
0382   3476           01282         RETLW   0x76                            ;39
0383   3400           01283         RETLW   0x00                            ;40
0384   3465           01284         RETLW   0x65                            ;41
0385   3400           01285         RETLW   0x00                            ;42
0386   347A           01286         RETLW   0x7A                            ;43
0387   3400           01287         RETLW   0x00                            ;44
0388   3420           01288         RETLW   0x20                            ;45
0389   3400           01289         RETLW   0x00                            ;46
038A   3464           01290         RETLW   0x64                            ;47
038B   3400           01291         RETLW   0x00                            ;48
038C   3465           01292         RETLW   0x65                            ;49
038D   3400           01293         RETLW   0x00                            ;50
038E   3420           01294         RETLW   0x20                            ;51
038F   3400           01295         RETLW   0x00                            ;52
0390   3450           01296         RETLW   0x50                            ;53
0391   3400           01297         RETLW   0x00                            ;54
0392   3449           01298         RETLW   0x49                            ;55
0393   3400           01299         RETLW   0x00                            ;56
0394   3443           01300         RETLW   0x43                            ;57
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0395   3400           01301         RETLW   0x00                            ;58
0396   3431           01302         RETLW   0x31                            ;59
0397   3400           01303         RETLW   0x00                            ;60
0398   3432           01304         RETLW   0x32                            ;61
0399   3400           01305         RETLW   0x00                            ;62
039A   3446           01306         RETLW   0x46                            ;63
039B   3400           01307         RETLW   0x00                            ;64
039C   3436           01308         RETLW   0x36                            ;65
039D   3400           01309         RETLW   0x00                            ;66
039E   3437           01310         RETLW   0x37                            ;67
039F   3400           01311         RETLW   0x00                            ;68
03A0   3435           01312         RETLW   0x35                            ;69
03A1   3400           01313         RETLW   0x00                            ;70
03A2   3420           01314         RETLW   0x20                            ;71
03A3   3400           01315         RETLW   0x00                            ;72
03A4   3470           01316         RETLW   0x70                            ;73
03A5   3400           01317         RETLW   0x00                            ;74
03A6   346F           01318         RETLW   0x6F                            ;75
03A7   3400           01319         RETLW   0x00                            ;76
03A8   3472           01320         RETLW   0x72                            ;77
03A9   3400           01321         RETLW   0x00                            ;78
03AA   3420           01322         RETLW   0x20                            ;79
03AB   3400           01323         RETLW   0x00                            ;80
03AC   3444           01324         RETLW   0x44                            ;81
03AD   3400           01325         RETLW   0x00                            ;82
03AE   344D           01326         RETLW   0x4D                            ;83
03AF   3400           01327         RETLW   0x00                            ;84
03B0   344C           01328         RETLW   0x4C                            ;85
03B1   3400           01329         RETLW   0x00                            ;86
                      01330 
03B2                  01331 SincUSB10
03B2   068C           01332         XORWF   GPIO, F                         ;Invierto D- y D+                       {0} [0]
03B3   0000           01333         nop                                     ;                                        +  [1]
03B4   0BA3           01334         DECFSZ  Veces, F                        ;Decremento mi variable...              {1} [2]
03B5   2BB2           01335         GOTO    SincUSB10                       ;Sigo hasta terminar los 7 cambios...   {23}[34]
03B6   3010           01336         MOVLW   0x10                            ;                                       {3} [4]
03B7   00A3           01337         MOVWF   Veces                           ;Cargo Variable con 16                  {0} [0]
                      01338 ;;;     nop                                     ;                                        +  [1]
03B8   3014           01339         MOVLW   ((1<<DataMenos)|(1<<DataMas))   ;Solamente los bits D- y D+             {1} [2]
                      01340 ;;;     NOP                                     ;                                       {2} [3]
03B9   2BBA           01341         goto    $+1
03BA   1C22           01342         BTFSS   ByteAMandar, 0                  ;Si el bit 0 del Dato a mandar es...    {3} [4]
03BB   068C           01343         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03BC   0000           01344         nop                                     ;                                        +  [1]
03BD   2BBE           01345         GOTO    $ + 1                           ;                                       {12}[23]
03BE   1CA2           01346         BTFSS   ByteAMandar, 1                  ;Si el bit 1 del Dato a mandar es...    {3} [4]
03BF   068C           01347         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03C0   0000           01348         nop                                     ;                                        +  [1]
03C1   2BC2           01349         GOTO    $ + 1                           ;                                       {12}[23]
03C2   1D22           01350         BTFSS   ByteAMandar, 2                  ;Si el bit 2 del Dato a mandar es...    {3} [4]
03C3   068C           01351         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03C4   0000           01352         nop                                     ;                                        +  [1]
03C5   2BC6           01353         GOTO    $ + 1                           ;                                       {12}[23]
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03C6   1DA2           01354         BTFSS   ByteAMandar, 3                  ;Si el bit 3 del Dato a mandar es...    {3} [4]
03C7   068C           01355         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03C8   0000           01356         nop                                     ;                                        +  [1]
03C9   2BCA           01357         GOTO    $ + 1                           ;                                       {12}[23]
03CA   1E22           01358         BTFSS   ByteAMandar, 4                  ;Si el bit 4 del Dato a mandar es...    {3} [4]
03CB   068C           01359         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03CC   0000           01360         nop                                     ;                                        +  [1]
03CD   2BCE           01361         GOTO    $ + 1                           ;                                       {12}[23]
03CE   1EA2           01362         BTFSS   ByteAMandar, 5                  ;Si el bit 5 del Dato a mandar es...    {3} [4]
03CF   068C           01363         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03D0   0000           01364         nop                                     ;                                        +  [1]
03D1   2BD2           01365         GOTO    $ + 1                           ;                                       {12}[23]
03D2   1F22           01366         BTFSS   ByteAMandar, 6                  ;Si el bit 6 del Dato a mandar es...    {3} [4]
03D3   068C           01367         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03D4   0000           01368         nop                                     ;                                        +  [1]
03D5   2BD6           01369         GOTO    $ + 1                           ;                                       {12}[23]
03D6   1FA2           01370         BTFSS   ByteAMandar, 7                  ;Si el bit 7 del Dato a mandar es...    {3} [4]
03D7   068C           01371         XORWF   GPIO, F                         ;..."0" invierto D- y D+                {0} [0]
03D8   0000           01372         nop                                     ;                                        +  [1]
03D9   294A           01373         GOTO    ConfEntradas                    ;                                       {12}[23]
                      01374 
03DA                  01375 _PD
03DA   3033           01376         MOVLW   PID
03DB   0084           01377         MOVWF   FSR
03DC   304B           01378         MOVLW   0x4B                    ;'01001011' DATA1
03DD   1CA1           01379         BTFSS   Data1
03DE   30C3           01380         MOVLW   0xC3                    ;'11000011' DATA0
03DF   0080           01381         MOVWF   INDF
03E0   10A1           01382         BCF     Data1
03E1   1D80           01383         BTFSS   INDF, 3
03E2   14A1           01384         BSF     Data1
03E3   21E6           01385         CALL    CalcularCRC16
03E4   220E           01386         CALL    InsertarCRC16
03E5   0AF1           01387         INCF    Var_3, F
03E6   2216           01388         CALL    InsertarBitStuffing
03E7   3008           01389         MOVLW   0x08
03E8   07F0           01390         ADDWF   Var_2, F
03E9   0008           01391         RETURN
                      01392 
03EA                  01393 ProcessOut                              ; Custom code goes here
03EA   138B           01394         BCF     INTCON, GIE
03EB   01F2           01395         CLRF    Var_4                   ; Limpio
03EC   0AF2           01396         INCF    Var_4, F                ; Incremento
03ED                  01397 SendL:
03ED   23F8           01398         call    bout+3          ; send start bit
03EE   00FE           01399         movwf   cn              ; cn=9
03EF   0CB4           01400         rrf     Recibido_1,f    ; set Carry             ; 1
03F0   23F5           01401         call    bout            ; wait 1bit and Carry=1 ; 2+1+1+1+1+8N+6=8N+12
03F1   0BFE           01402         decfsz  cn,f            ; send 10bits?          ; 1
03F2   2BEF           01403         goto    $-3             ; loop                  ; 2(1) total:1+8N+12+1+2=8N+16
03F3   178B           01404         BSF     INTCON, GIE
03F4   0008           01405         RETURN
                      01406 
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03F5                  01407 bout:
03F5   1803           01408         btfsc   STATUS,C
03F6   148C           01409         bsf     GPIO,TX
03F7   1C03           01410         btfss   STATUS,C
03F8   108C           01411         bcf     GPIO,TX
                      01412 
03F9                  01413 bwait:                          ; wait 1 bit
03F9   23FA           01414         call    bwait2                          ; 2+(4N+2)+(4N+2)=8N+6
03FA                  01415 bwait2:                         ; wait 1/2bit and Set Carry=1
03FA   30A1           01416         movlw   .256-((xtal/.4)/baud-.16)/.8    ; 1
03FB   3E01           01417         addlw   0x01                            ; 1
03FC   1D03           01418         btfss   STATUS,Z                        ; 1
03FD   2BFB           01419         goto    $-2                             ; 2(1)
03FE   3409           01420         retlw   0x09                            ; 2 total:1+(1+1+2)*N-1+2=4N+2
                      01421 
Message[303]: Program word too large.  Truncated to core size. (F9A7)
Message[303]: Program word too large.  Truncated to core size. (DDFF)
                      01422         END
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

ACKTokenRecibido                  000000A1
ADCON0                            0000009D
ADCON1                            0000009E
ADCON2                            0000009F
ADFM                              00000007
ADFVR0                            00000000
ADFVR1                            00000001
ADGO                              00000001
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADPREF0                           00000000
ADPREF1                           00000001
ADRES                             0000009B
ADRESH                            0000009C
ADRESL                            0000009B
ANSA0                             00000000
ANSA1                             00000001
ANSA2                             00000002
ANSA4                             00000004
ANSEL                             ANSELA
ANSELA                            0000018C
APFCON                            0000011D
AddrAsignOK                       Banderas_0, 0
AddressNRZI                       00000299
AsignAddress                      Banderas_1, 0
AsignarNuevoAddress               000000C4
BORCON                            00000116
BORFS                             00000006
BORRDY                            00000000
BSR                               00000008
BSR0                              00000000
BSR1                              00000001
BSR2                              00000002
BSR3                              00000003
BSR4                              00000004
BSR_ICDSHAD                       00000FE3
BSR_SHAD                          00000FE6
Banderas_0                        00000020
Banderas_1                        00000021
ByteAMandar                       00000022
BytesRecibidos                    00000031
C                                 00000000
C1HYS                             00000001
C1IE                              00000005
C1IF                              00000005
C1INTN                            00000006
C1INTP                            00000007
C1NCH0                            00000000
C1NCH1                            00000001
C1NCH2                            00000002
C1OE                              00000005
C1ON                              00000007
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

C1OUT                             00000006
C1PCH0                            00000004
C1PCH1                            00000005
C1POL                             00000004
C1SP                              00000002
C1SYNC                            00000000
CDAFVR0                           00000002
CDAFVR1                           00000003
CFGS                              00000006
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CHS4                              00000006
CLC1CON                           00000F10
CLC1GLS0                          00000F14
CLC1GLS1                          00000F15
CLC1GLS2                          00000F16
CLC1GLS3                          00000F17
CLC1IE                            00000000
CLC1IF                            00000000
CLC1POL                           00000F11
CLC1SEL                           00000001
CLC1SEL0                          00000F12
CLC1SEL1                          00000F13
CLC2CON                           00000F18
CLC2GLS0                          00000F1C
CLC2GLS1                          00000F1D
CLC2GLS2                          00000F1E
CLC2GLS3                          00000F1F
CLC2IE                            00000001
CLC2IF                            00000001
CLC2POL                           00000F19
CLC2SEL0                          00000F1A
CLC2SEL1                          00000F1B
CLCDATA                           00000F0F
CLEAR_FEATURE                     00000290
CM1CON0                           00000111
CM1CON1                           00000112
CMOUT                             00000115
CWG1ASEL                          00000006
CWG1BSEL                          00000007
CWG1CON0                          00000693
CWG1CON1                          00000694
CWG1CON2                          00000695
CWG1DBF                           00000692
CWG1DBF0                          00000000
CWG1DBF1                          00000001
CWG1DBF2                          00000002
CWG1DBF3                          00000003
CWG1DBF4                          00000004
CWG1DBF5                          00000005
CWG1DBR                           00000691
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

CWG1DBR0                          00000000
CWG1DBR1                          00000001
CWG1DBR2                          00000002
CWG1DBR3                          00000003
CWG1DBR4                          00000004
CWG1DBR5                          00000005
C_SHAD                            00000000
CalcularCRC16                     000001E6
ConfEntradas                      0000014A
Configurar                        00000011
ContTabla                         00000252
ContinuoRecibiendo                00000054
D1N                               00000000
D1S0                              00000000
D1S1                              00000001
D1S2                              00000002
D1T                               00000001
D2N                               00000002
D2S0                              00000004
D2S1                              00000005
D2S2                              00000006
D2T                               00000003
D3N                               00000004
D3S0                              00000000
D3S1                              00000001
D3S2                              00000002
D3T                               00000005
D4N                               00000006
D4S0                              00000004
D4S1                              00000005
D4S2                              00000006
D4T                               00000007
DACCON0                           00000118
DACCON1                           00000119
DACEN                             00000007
DACOE1                            00000005
DACOE2                            00000004
DACPSS                            00000002
DACR0                             00000000
DACR1                             00000001
DACR2                             00000002
DACR3                             00000003
DACR4                             00000004
DATARecibido                      000000CC
DC                                00000001
DC_SHAD                           00000001
Data1                             Banderas_1, 1
DataMas                           00000002
DataMenos                         00000004
DescTimeOut                       0000002A
DesencriptarNRZI                  000001AA
DeviceAddress                     0000007C
EscribirUSBDATA                   0000016C
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

EscribirUSBPID                    00000112
EspInt                            00000024
Espero                            00000152
EsperoContinuacion                00000021
F                                 00000001
FREE                              00000004
FSR                               FSR0L
FSR0                              00000004
FSR0H                             00000005
FSR0H_SHAD                        00000FE9
FSR0L                             00000004
FSR0L_SHAD                        00000FE8
FSR1                              00000006
FSR1H                             00000007
FSR1H_SHAD                        00000FEB
FSR1L                             00000006
FSR1L_SHAD                        00000FEA
FVRCON                            00000117
FVREN                             00000007
FVRRDY                            00000006
G1ARSEN                           00000006
G1ASDLA0                          00000004
G1ASDLA1                          00000005
G1ASDLB0                          00000006
G1ASDLB1                          00000007
G1ASDSC1                          00000002
G1ASDSCLC2                        00000000
G1ASDSFLT                         00000001
G1ASE                             00000007
G1CS0                             00000000
G1EN                              00000007
G1IS0                             00000000
G1IS1                             00000001
G1IS2                             00000002
G1OEA                             00000005
G1OEB                             00000006
G1POL                             00000000
G1POLA                            00000003
G1POLB                            00000004
G2POL                             00000001
G3POL                             00000002
G4D1N                             00000000
G4D1T                             00000001
G4D2N                             00000002
G4D2T                             00000003
G4D3N                             00000004
G4D3T                             00000005
G4D4N                             00000006
G4D4T                             00000007
G4POL                             00000003
GET_CONFIGURATION                 000002DC
GET_INTERFACE                     000002E3
GET_SET_DESCRIPTOR                000002A3
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

GET_STATUS                        0000028A
GIE                               00000007
GINSR                             000002EA
GO                                00000001
GO_NOT_DONE                       00000001
GPIO                              PORTA
HFIOFR                            00000004
HFIOFS                            00000000
INDF                              INDF0
INDF0                             00000000
INDF1                             00000001
INPend                            Banderas_1, 3
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
INToken                           000000AB
IOCAF                             00000393
IOCAF0                            00000000
IOCAF1                            00000001
IOCAF2                            00000002
IOCAF3                            00000003
IOCAF4                            00000004
IOCAF5                            00000005
IOCAN                             00000392
IOCAN0                            00000000
IOCAN1                            00000001
IOCAN2                            00000002
IOCAN3                            00000003
IOCAN4                            00000004
IOCAN5                            00000005
IOCAP                             00000391
IOCAP0                            00000000
IOCAP1                            00000001
IOCAP2                            00000002
IOCAP3                            00000003
IOCAP4                            00000004
IOCAP5                            00000005
IOCIE                             00000003
IOCIF                             00000000
IRCF0                             00000003
IRCF1                             00000004
IRCF2                             00000005
IRCF3                             00000006
IdentificarStdReq                 0000027B
Identificar_PID                   00000082
InsertarBitStuffing               00000216
InsertarCRC16                     0000020E
InterruptIN                       Banderas_1, 4
InterruptTransfer                 00000105
LATA                              0000010C
LATA0                             00000000
LATA1                             00000001
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

LATA2                             00000002
LATA4                             00000004
LATA5                             00000005
LC1D1S0                           00000000
LC1D1S1                           00000001
LC1D1S2                           00000002
LC1D2S0                           00000004
LC1D2S1                           00000005
LC1D2S2                           00000006
LC1D3S0                           00000000
LC1D3S1                           00000001
LC1D3S2                           00000002
LC1D4S0                           00000004
LC1D4S1                           00000005
LC1D4S2                           00000006
LC1EN                             00000007
LC1G1D1N                          00000000
LC1G1D1T                          00000001
LC1G1D2N                          00000002
LC1G1D2T                          00000003
LC1G1D3N                          00000004
LC1G1D3T                          00000005
LC1G1D4N                          00000006
LC1G1D4T                          00000007
LC1G1POL                          00000000
LC1G2D1N                          00000000
LC1G2D1T                          00000001
LC1G2D2N                          00000002
LC1G2D2T                          00000003
LC1G2D3N                          00000004
LC1G2D3T                          00000005
LC1G2D4N                          00000006
LC1G2D4T                          00000007
LC1G2POL                          00000001
LC1G3D1N                          00000000
LC1G3D1T                          00000001
LC1G3D2N                          00000002
LC1G3D2T                          00000003
LC1G3D3N                          00000004
LC1G3D3T                          00000005
LC1G3D4N                          00000006
LC1G3D4T                          00000007
LC1G3POL                          00000002
LC1G4D1N                          00000000
LC1G4D1T                          00000001
LC1G4D2N                          00000002
LC1G4D2T                          00000003
LC1G4D3N                          00000004
LC1G4D3T                          00000005
LC1G4D4N                          00000006
LC1G4D4T                          00000007
LC1G4POL                          00000003
LC1INTN                           00000003
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

LC1INTP                           00000004
LC1MODE0                          00000000
LC1MODE1                          00000001
LC1MODE2                          00000002
LC1OE                             00000006
LC1OUT                            00000005
LC1POL                            00000007
LC2D1S0                           00000000
LC2D1S1                           00000001
LC2D1S2                           00000002
LC2D2S0                           00000004
LC2D2S1                           00000005
LC2D2S2                           00000006
LC2D3S0                           00000000
LC2D3S1                           00000001
LC2D3S2                           00000002
LC2D4S0                           00000004
LC2D4S1                           00000005
LC2D4S2                           00000006
LC2EN                             00000007
LC2G1D1N                          00000000
LC2G1D1T                          00000001
LC2G1D2N                          00000002
LC2G1D2T                          00000003
LC2G1D3N                          00000004
LC2G1D3T                          00000005
LC2G1D4N                          00000006
LC2G1D4T                          00000007
LC2G1POL                          00000000
LC2G2D1N                          00000000
LC2G2D1T                          00000001
LC2G2D2N                          00000002
LC2G2D2T                          00000003
LC2G2D3N                          00000004
LC2G2D3T                          00000005
LC2G2D4N                          00000006
LC2G2D4T                          00000007
LC2G2POL                          00000001
LC2G3D1N                          00000000
LC2G3D1T                          00000001
LC2G3D2N                          00000002
LC2G3D2T                          00000003
LC2G3D3N                          00000004
LC2G3D3T                          00000005
LC2G3D4N                          00000006
LC2G3D4T                          00000007
LC2G3POL                          00000002
LC2G4D1N                          00000000
LC2G4D1T                          00000001
LC2G4D2N                          00000002
LC2G4D2T                          00000003
LC2G4D3N                          00000004
LC2G4D3T                          00000005
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

LC2G4D4N                          00000006
LC2G4D4T                          00000007
LC2G4POL                          00000003
LC2INTN                           00000003
LC2INTP                           00000004
LC2MODE0                          00000000
LC2MODE1                          00000001
LC2MODE2                          00000002
LC2OE                             00000006
LC2OUT                            00000005
LC2POL                            00000007
LCEN                              00000007
LCINTN                            00000003
LCINTP                            00000004
LCMODE0                           00000000
LCMODE1                           00000001
LCMODE2                           00000002
LCOE                              00000006
LCOUT                             00000005
LFIOFR                            00000001
LWLO                              00000005
Label_0                           000001C1
Label_1                           000001CE
Label_2                           000001D7
Label_3                           000001DD
Label_4                           000001F0
Label_5                           00000221
Label_6                           0000022E
Label_7                           00000235
Label_8                           0000023C
Label_9                           00000249
Label_A                           000002EB
LeerDescriptor                    00000259
LevantarTabla                     000002F0
LimpioINT                         00000097
LimpioInterrupcion                000000E8
LoopPrincipal                     0000001D
MC1OUT                            00000000
MCLC1OUT                          00000000
MCLC2OUT                          00000001
MandarACK                         00000111
MandarDATA                        00000107
MandarNAK                         0000010F
MandarSTALL                       0000010B
MandarSigByte                     00000184
MandarZLP                         000000C8
Mandar_CONFIGURATION_Descriptor   000002BE
Mandar_DEVICE_Descriptor          000002BA
Mandar_HIDReport_Descriptor       000002C6
Mandar_HID_Descriptor             000002C2
Mandar_STRING_Descriptors         000002CA
N1CKS0                            00000000
N1CKS1                            00000001
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

N1EN                              00000007
N1OE                              00000006
N1OUT                             00000005
N1PFM                             00000000
N1POL                             00000004
N1PWS0                            00000005
N1PWS1                            00000006
N1PWS2                            00000007
NCO1ACC                           00000498
NCO1ACC0                          00000000
NCO1ACC1                          00000001
NCO1ACC10                         00000002
NCO1ACC11                         00000003
NCO1ACC12                         00000004
NCO1ACC13                         00000005
NCO1ACC14                         00000006
NCO1ACC15                         00000007
NCO1ACC16                         00000000
NCO1ACC17                         00000001
NCO1ACC18                         00000002
NCO1ACC19                         00000003
NCO1ACC2                          00000002
NCO1ACC3                          00000003
NCO1ACC4                          00000004
NCO1ACC5                          00000005
NCO1ACC6                          00000006
NCO1ACC7                          00000007
NCO1ACC8                          00000000
NCO1ACC9                          00000001
NCO1ACCH                          00000499
NCO1ACCL                          00000498
NCO1ACCU                          0000049A
NCO1CLK                           0000049F
NCO1CON                           0000049E
NCO1IE                            00000002
NCO1IF                            00000002
NCO1INC                           0000049B
NCO1INC0                          00000000
NCO1INC1                          00000001
NCO1INC10                         00000002
NCO1INC11                         00000003
NCO1INC12                         00000004
NCO1INC13                         00000005
NCO1INC14                         00000006
NCO1INC15                         00000007
NCO1INC2                          00000002
NCO1INC3                          00000003
NCO1INC4                          00000004
NCO1INC5                          00000005
NCO1INC6                          00000006
NCO1INC7                          00000007
NCO1INC8                          00000000
NCO1INC9                          00000001
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

NCO1INCH                          0000049C
NCO1INCL                          0000049B
NCO1INCU                          0000049D
NCO1SEL                           00000000
NOT_BOR                           00000000
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RI                            00000002
NOT_RMCLR                         00000003
NOT_RWDT                          00000004
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_WPUEN                         00000007
NuevoAddress                      00000032
OPTION_REG                        00000095
OSC1                              00000005
OSCCON                            00000099
OSCSTAT                           0000009A
OUTToken                          00000095
Ocupado                           Banderas_0, 3
PCL                               00000002
PCLATH                            0000000A
PCLATH_SHAD                       00000FE7
PCON                              00000096
PEIE                              00000006
PID                               00000033
PIE1                              00000091
PIE2                              00000092
PIE3                              00000093
PIR1                              00000011
PIR2                              00000012
PIR3                              00000013
PMADR                             00000191
PMADRH                            00000192
PMADRL                            00000191
PMCON1                            00000195
PMCON2                            00000196
PMDAT                             00000193
PMDATH                            00000194
PMDATL                            00000193
POL                               00000007
PORTA                             0000000C
PR2                               0000001B
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PWM1CON                           00000613
PWM1CON0                          00000613
PWM1DCH                           00000612
PWM1DCH0                          00000000
PWM1DCH1                          00000001
PWM1DCH2                          00000002
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 39


SYMBOL TABLE
  LABEL                             VALUE 

PWM1DCH3                          00000003
PWM1DCH4                          00000004
PWM1DCH5                          00000005
PWM1DCH6                          00000006
PWM1DCH7                          00000007
PWM1DCL                           00000611
PWM1DCL0                          00000006
PWM1DCL1                          00000007
PWM1EN                            00000007
PWM1OE                            00000006
PWM1OUT                           00000005
PWM1POL                           00000004
PWM2CON                           00000616
PWM2CON0                          00000616
PWM2DCH                           00000615
PWM2DCH0                          00000000
PWM2DCH1                          00000001
PWM2DCH2                          00000002
PWM2DCH3                          00000003
PWM2DCH4                          00000004
PWM2DCH5                          00000005
PWM2DCH6                          00000006
PWM2DCH7                          00000007
PWM2DCL                           00000614
PWM2DCL0                          00000006
PWM2DCL1                          00000007
PWM2EN                            00000007
PWM2OE                            00000006
PWM2OUT                           00000005
PWM2POL                           00000004
PWM3CON                           00000619
PWM3CON0                          00000619
PWM3DCH                           00000618
PWM3DCH0                          00000000
PWM3DCH1                          00000001
PWM3DCH2                          00000002
PWM3DCH3                          00000003
PWM3DCH4                          00000004
PWM3DCH5                          00000005
PWM3DCH6                          00000006
PWM3DCH7                          00000007
PWM3DCL                           00000617
PWM3DCL0                          00000006
PWM3DCL1                          00000007
PWM3EN                            00000007
PWM3OE                            00000006
PWM3OUT                           00000005
PWM3POL                           00000004
PWM4CON                           0000061C
PWM4CON0                          0000061C
PWM4DCH                           0000061B
PWM4DCH0                          00000000
PWM4DCH1                          00000001
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

PWM4DCH2                          00000002
PWM4DCH3                          00000003
PWM4DCH4                          00000004
PWM4DCH5                          00000005
PWM4DCH6                          00000006
PWM4DCH7                          00000007
PWM4DCL                           0000061A
PWM4DCL0                          00000006
PWM4DCL1                          00000007
PWM4EN                            00000007
PWM4OE                            00000006
PWM4OUT                           00000005
PWM4POL                           00000004
Posicion                          00000042
PrepararDescriptor                00000265
ProcesarDATA                      000000DC
ProcesarSetup                     00000268
ProcessOut                        000003EA
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RD                                00000000
RTS                               00000000
RX                                00000003
RcvL                              00000156
RecNRZI_0                         00000024
RecNRZI_1                         00000025
RecNRZI_2                         00000026
RecNRZI_3                         00000027
RecNRZI_4                         00000028
RecNRZI_5                         00000029
RecNRZI_6                         0000002A
RecNRZI_7                         0000002B
RecNRZI_8                         0000002C
RecNRZI_9                         0000002D
RecNRZI_A                         0000002E
RecNRZI_B                         0000002F
RecNRZI_C                         00000030
RecepcionUSB                      00000031
Recibido_1                        00000034
Recibido_2                        00000035
Recibido_3                        00000036
Recibido_4                        00000037
Recibido_5                        00000038
Recibido_6                        00000039
Recibido_7                        0000003A
Recibido_8                        0000003B
Recibido_9                        0000003C
Recibido_A                        0000003D
Recibido_B                        0000003E
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 41


SYMBOL TABLE
  LABEL                             VALUE 

Recibido_C                        0000003F
Recupero_PCLATH                   00000097
Recupero_STATUS                   00000097
Recupero_W                        00000097
RegresardeInterrupt               00000097
RespPID                           00000043
Resp_0                            00000044
Resp_1                            00000045
Resp_2                            00000046
Resp_3                            00000047
Resp_4                            00000048
Resp_5                            00000049
Resp_6                            0000004A
Resp_7                            0000004B
Resp_8                            0000004C
Resp_9                            0000004D
Resp_A                            0000004E
Resp_B                            0000004F
ResponderIN                       000000C1
SBOREN                            00000007
SCS0                              00000000
SCS1                              00000001
SETUPToken                        00000099
SET_ADDRESS                       00000294
SET_CONFIGURATION                 000002DF
SET_FEATURE                       00000292
SET_INTERFACE                     000002E7
STATUS                            00000003
STATUS_SHAD                       00000FE4
STKOVF                            00000007
STKPTR                            00000FED
STKUNF                            00000006
SWDTEN                            00000000
SYNCH_FRAME                       000002E8
SendL                             000003ED
Setup                             Banderas_0, 5
SigNRZI                           000001AF
SiguienteDatoTabla                0000025C
SincUSB1                          0000011D
SincUSB10                         000003B2
SincUSB2                          00000179
Stall                             Banderas_1, 5
StringDescriptor0                 000002CF
StringDescriptor1                 000002D3
StringDescriptor2                 000002D7
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000018
T1GCON                            00000019
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 42


SYMBOL TABLE
  LABEL                             VALUE 

T1GGO_NOT_DONE                    00000003
T1GPOL                            00000006
T1GSEL                            00000003
T1GSPM                            00000004
T1GSS0                            00000000
T1GSS1                            00000001
T1GTM                             00000005
T1GVAL                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             0000001C
TMR0                              00000015
TMR0CS                            00000005
TMR0IE                            00000005
TMR0IF                            00000002
TMR0SE                            00000004
TMR1                              00000016
TMR1CS0                           00000006
TMR1CS1                           00000007
TMR1GE                            00000007
TMR1GIE                           00000007
TMR1GIF                           00000007
TMR1H                             00000017
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             00000016
TMR1ON                            00000000
TMR2                              0000001A
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TMovf                             00000007
TOSH                              00000FEF
TOSL                              00000FEE
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRIGSEL0                          00000004
TRIGSEL1                          00000005
TRIGSEL2                          00000006
TRIGSEL3                          00000007
TRISA                             0000008C
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISIO                            TRISA
TSEN                              00000005
TSRNG                             00000004
TX                                00000001
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 43


SYMBOL TABLE
  LABEL                             VALUE 

TodaviaNO                         00000093
UltAddressRec                     0000007D
VREGCON                           00000197
VREGPM                            00000001
Var_0                             00000040
Var_1                             00000041
Var_2                             00000070
Var_3                             00000071
Var_4                             00000072
Var_5                             00000073
Var_6                             00000074
Var_7                             00000075
Var_8                             00000076
Var_9                             00000077
Veces                             00000023
W                                 00000000
WDTCON                            00000097
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WDTPS4                            00000005
WPUA                              0000020C
WPUA0                             00000000
WPUA1                             00000001
WPUA2                             00000002
WPUA3                             00000003
WPUA4                             00000004
WPUA5                             00000005
WR                                00000001
WREG                              00000009
WREG_SHAD                         00000FE5
WREN                              00000002
WRERR                             00000003
Z                                 00000002
ZLP                               00000146
ZLPPend                           Banderas_1, 6
ZLPPendiente                      000000CA
Z_SHAD                            00000002
_BOREN_NSLEEP                     0000FDFF
_BOREN_OFF                        0000F9FF
_BOREN_ON                         0000FFFF
_BOREN_SBODEN                     0000FBFF
_BORV_HI                          0000FBFF
_BORV_LO                          0000FFFF
_CLKOUTEN_OFF                     0000FFFF
_CLKOUTEN_ON                      0000F7FF
_CONFIG1                          00008007
_CONFIG2                          00008008
_CP_OFF                           0000FFFF
_CP_ON                            0000FF7F
_DEVID1                           00008006
_FOSC_ECH                         0000FFFF
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 44


SYMBOL TABLE
  LABEL                             VALUE 

_FOSC_ECL                         0000FFFD
_FOSC_ECM                         0000FFFE
_FOSC_INTOSC                      0000FFFC
_GI1                              000002E4
_GI2                              000002E5
_IDLOC0                           00008000
_IDLOC1                           00008001
_IDLOC2                           00008002
_IDLOC3                           00008003
_LPBOR_OFF                        0000FFFF
_LPBOR_ON                         0000F7FF
_LVP_OFF                          0000DFFF
_LVP_ON                           0000FFFF
_MCLRE_OFF                        0000FFBF
_MCLRE_ON                         0000FFFF
_PD                               000003DA
_PWRTE_OFF                        0000FFFF
_PWRTE_ON                         0000FFDF
_SD2                              000002DA
_STVREN_OFF                       0000FDFF
_STVREN_ON                        0000FFFF
_WDTE_NSLEEP                      0000FFF7
_WDTE_OFF                         0000FFE7
_WDTE_ON                          0000FFFF
_WDTE_SWDTEN                      0000FFEF
_WRT_ALL                          0000FFFC
_WRT_BOOT                         0000FFFE
_WRT_HALF                         0000FFFD
_WRT_OFF                          0000FFFF
__12F1501                         00000001
__DEBUG                           1
bReqNS                            000002E9
baud                              00002580
bout                              000003F5
bwait                             000003F9
bwait2                            000003FA
cn                                0000007E
rxd                               0000007F
timeout                           0000016A
xtal                              01C9C380


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXX-XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.51                           USB.ASM   3-16-2015  2:09:46         PAGE 45


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXX-
8000 : -------XX------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:  1024
Program Memory Words Free:     0


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     4 reported,     7 suppressed

