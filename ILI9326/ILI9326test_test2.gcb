
#chip 16F1789,32
#config osc=INTosc, MCLRE=on;;;, WDTE=Off, boren=off
#option explicit
#include <glcd.h>
#define GLCD_TYPE GLCD_TYPE_ILI9326

    #define GLCD_RD       porta.3        ' read command line
    #define GLCD_WR       porta.2         ' write command line
    #define GLCD_RS       porta.1         ' Command/Data line
    #define GLCD_CS       porta.0         ' Chip select line
    #define GLCD_RST      porta.5         ' Reset line

   ' #define GLCD_DB0       portd.0
    '#define GLCD_DB1       portd.1
   ' #define GLCD_DB2       portd.2
    '#define GLCD_DB3       portd.3
    '#define GLCD_DB4       portd.4
    '#define GLCD_DB5       portd.5
    '#define GLCD_DB6       portd.6
    '#define GLCD_DB7       portd.7
    #define GLCD_DataPort portD
    #define ILI9326_DataPort GLCD_DataPort

      #define ILI9326_GLCD_RST GLCD_RST
      #define ILI9326_GLCD_CS GLCD_CS
      #define ILI9326_GLCD_RS GLCD_RS
      #define ILI9326_GLCD_WR GLCD_WR
      #define ILI9326_GLCD_RD GLCD_RD

dir ILI9326_dataPort out

dim ILI9326_SENDWORD as word

#define GLCD_WIDTH  240
#define GLCD_HEIGHT 400
#define GLCDCLS       GLCDCLS_ILI9326
#define GLCDRotate    GLCDRotate_ILI9326
#define PSET          PSet_ILI9326
#define GLCDDrawChar  GLCDDrawChar_ILI9326
#define FilledBox     FilledBox_ILI9326
#define GLCDDrawString GLCDDrawString_ILI9326

test:

InitGLCD_ILI9326
'
'c
'GLCDForeground = ILI9326_BLACK
'GLCDRotate ( LANDSCAPE_REV )
'   GLCDCLS ( ILI9326_YELLOW )
'
GLCDfntDefaultSize = 2
GLCDFontWidth = 4
GLCDCLS ( TFT_RED )
wait 1 s

      line 0,0,100,100
      Box 0, 0, ILI9326_GLCD_WIDTH -1, ILI9326_GLCD_HEIGHT - 1
      GLCDDrawString ( 20, 20, "Evan" )
      BigPrint_ILI9326 ( 10, ILI9326_GLCD_HEIGHT - 20 , "BigPrint ILI9326" )
wait 4 s

do

      GLCDCLS ( GLCDBackground )




      Line 0, 0, ILI9326_GLCD_WIDTH -1, ILI9326_GLCD_HEIGHT - 1

      'Box 0, 0, 400 - 1, 240 - 1

      Box 0, 0, ILI9326_GLCD_WIDTH -1, ILI9326_GLCD_HEIGHT - 1
      box ILI9326_GLCD_WIDTH -1, ILI9326_GLCD_HEIGHT - 1, ILI9326_GLCD_WIDTH -10, ILI9326_GLCD_HEIGHT - 10
      #define GLCD_OLED_FONT
      GLCDDrawString ( 20, 20, "Evan" )

      circle ILI9326_GLCD_WIDTH/2, ILI9326_GLCD_HEIGHT/2, 30

      Filledbox ( 120,120,150,150, ILI9326_BLUE  )

      GLCDBackground = GLCDBackground  + 8
      wait 10 ms
loop
'GLCDChar_ili9326( 50, 50 ,10 )
'GLCDChar_ili9326( 60, 50 ,11 )
'GLCDChar_ili9326( 70, 50 ,12 )
'

sleep
end


#define ILI9326_WHITE   TFT_WHITE
#define ILI9326_BLACK   TFT_BLACK
#define ILI9326_RED     TFT_RED
#define ILI9326_GREEN   TFT_GREEN
#define ILI9326_BLUE    TFT_BLUE
#define ILI9326_YELLOW  TFT_YELLOW
#define ILI9326_CYAN    TFT_CYAN
#define ILI9326_MAGENTA TFT_MAGENTA
#define ILI9326_NAVY          TFT_NAVY
#define ILI9326_DARKGREEN     TFT_DARKGREEN
#define ILI9326_DARKCYAN      TFT_DARKCYAN
#define ILI9326_MAROON        TFT_MAROON
#define ILI9326_PURPLE        TFT_PURPLE
#define ILI9326_OLIVE         TFT_OLIVE
#define ILI9326_LIGHTGREY     TFT_LIGHTGREY
#define ILI9326_DARKGREY      TFT_DARKGREY
#define ILI9326_ORANGE        TFT_ORANGE
#define ILI9326_GREENYELLOW   TFT_GREENYELLOW
#define ILI9326_PINK          TFT_PINK

#define ILI9326_LCD_DRV_OUTPUT_CTRL           0x0001
#define ILI9326_LCD_DRIVING_WAVE_CTRL         0x0002
#define ILI9326_ENTRY_MODE                    0x0003

'Bits of entry mode
#define ILI9326_ENTRY_MODE_TRI                0x8000
#define ILI9326_ENTRY_MODE_DFM                0x4000
#define ILI9326_ENTRY_MODE_BGR                0x1000
#define ILI9326_ENTRY_MODE_RGB                0x0000
#define ILI9326_ENTRY_MODE_HWM                0x0200
#define ILI9326_ENTRY_MODE_ORG                0x0080
#define ILI9326_ENTRY_MODE_ID1                0x0020
#define ILI9326_ENTRY_MODE_ID0                0x0010
#define ILI9326_ENTRY_MODE_AM                 0x0008

#define ILI9326_OUTLINE_SHARPENING_CTRL       0x0006
#define ILI9326_DISP_CTRL_1                   0x0007
#define ILI9326_DISP_CTRL_2                   0x0008
#define ILI9326_DISP_CTRL_3                   0x0009
#define ILI9326_LOW_PWR_CTRL                  0x000b
#define ILI9326_RGB_DISP_INTF_CTRL_1          0x000c
#define ILI9326_RGB_DISP_INTF_CTRL_2          0x000f
#define ILI9326_PANEL_INTF_CTRL_1             0x0010
#define ILI9326_PANEL_INTF_CTRL_2             0x0011
#define ILI9326_PANEL_INTF_CTRL_3             0x0012
#define ILI9326_PANEL_INTF_CTRL_4             0x0020
#define ILI9326_PANEL_INTF_CTRL_5             0x0021
#define ILI9326_PANEL_INTF_CTRL_6             0x0022
#define ILI9326_FRAME_MARKER_POS              0x0090
#define ILI9326_PWR_CTRL_1                    0x0100
#define ILI9326_PWR_CTRL_2                    0x0101
#define ILI9326_PWR_CTRL_3                    0x0102
#define ILI9326_PWR_CTRL_4                    0x0103
#define ILI9326_PWR_CTRL_5                    0x0107
#define ILI9326_GRAM_ADDR_H_SET               0x0200
#define ILI9326_GRAM_ADDR_V_SET               0x0201
#define ILI9326_GRAM_WR_DATA                  0x0202
#define ILI9326_FRAME_RATE_COLOR_CTRL         0x020b
#define ILI9326_H_ADDR_START_POS              0x0210
#define ILI9326_H_ADDR_END_POS                0x0211
#define ILI9326_V_ADDR_START_POS              0x0212
#define ILI9326_V_ADDR_END_POS                0x0213
#define ILI9326_UID_CODE                      0x0280
#define ILI9326_VCOMH                         0x0281
#define ILI9326_MPT_VCM_PROG                  0x0290
#define ILI9326_MTP_VCM_STAT_EN               0x0291
#define ILI9326_MTP_PROG_KEY                  0x0295
#define ILI9326_GAMMA_CTRL_1                  0x0300
#define ILI9326_GAMMA_CTRL_2                  0x0301
#define ILI9326_GAMMA_CTRL_3                  0x0302
#define ILI9326_GAMMA_CTRL_4                  0x0305
#define ILI9326_GAMMA_CTRL_5                  0x0306
#define ILI9326_GAMMA_CTRL_6                  0x0307
#define ILI9326_GAMMA_CTRL_7                  0x0308
#define ILI9326_GAMMA_CTRL_8                  0x0309
#define ILI9326_GAMMA_CTRL_9                  0x030c
#define ILI9326_GAMMA_CTRL_10                 0x030d
#define ILI9326_BASE_IMG_DISP_CTRL_1          0x0400
#define ILI9326_BASE_IMG_DISP_CTRL_2          0x0401
#define ILI9326_BASE_IMG_DISP_CTRL_3          0x0404
#define ILI9326_PART_IMG_1_DISP_POS           0x0500
#define ILI9326_PART_IMG_1_AREA_START         0x0501
#define ILI9326_PART_IMG_1_AREA_END           0x0502
#define ILI9326_PART_IMG_2_DISP_POS           0x0503
#define ILI9326_PART_IMG_2_AREA_START         0x0504
#define ILI9326_PART_IMG_2_AREA_END           0x0505

' Screen rotation
#define LANDSCAPE       1
#define PORTRAIT_REV    2
#define LANDSCAPE_REV   3
#define PORTRAIT        4

'Foreground and background colours
Dim GLCDBackground As Word
Dim GLCDForeground As Word


Dim ILI9326_GLCD_WIDTH, ILI9326_GLCD_HEIGHT as word

sub InitGLCD_ILI9326

      Dim ILI9326_GLCD_WIDTH, ILI9326_GLCD_HEIGHT as word
      Dim ILI9326_GLCD_WIDTH_ADJ, ILI9326_GLCD_HEIGHT_ADJ as word
      Dim ILI9326_AddressType as byte

      'Reset*********************
      Set ILI9326_GLCD_RST On
      Wait 15 ms
      Set ILI9326_GLCD_RST Off
      Wait 15 ms
      Set ILI9326_GLCD_RST On
      Wait 15 ms
      '//*************Power On sequence ****************//
      'parameters below taken from...
      '*  Module for Microchip Graphics Library
      '*  LCD controller driver*  ILI9326
      'discharge*********************
      SendCommand_ILI9326(ILI9326_PWR_CTRL_1)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_PWR_CTRL_3)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_PWR_CTRL_4)
      SendData_ili9326(0x0000)
      wait 200 ms 'power settings*****
      SendCommand_ILI9326(ILI9326_PWR_CTRL_1)
      SendData_ili9326(0x1190)
      SendCommand_ILI9326(ILI9326_PWR_CTRL_2)
      SendData_ili9326(0x0017)
      SendCommand_ILI9326(ILI9326_PWR_CTRL_3)
      SendData_ili9326(0x01BD)
      SendCommand_ILI9326(ILI9326_PWR_CTRL_4)
      SendData_ili9326(0x0350)
      SendCommand_ILI9326(ILI9326_VCOMH)
      SendData_ili9326(0x0017)
      SendCommand_ILI9326(ILI9326_GRAM_ADDR_H_SET)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_GRAM_ADDR_V_SET)
      SendData_ili9326(0x0000)

      'set gamma curve**************
      SendCommand_ILI9326(0x0300)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(0x0301)
      SendData_ili9326(0x0707)
      SendCommand_ILI9326(0x0302)
      SendData_ili9326(0x0606)
      SendCommand_ILI9326(0x0305)
      SendData_ili9326(0x0006)
      SendCommand_ILI9326(0x0306)
      SendData_ili9326(0x0A09)
      SendCommand_ILI9326(0x0307)
      SendData_ili9326(0x0203)
      SendCommand_ILI9326(0x0308)
      SendData_ili9326(0x0005)
      SendCommand_ILI9326(0x0309)
      SendData_ili9326(0x0007)
      SendCommand_ILI9326(0x030C)
      SendData_ili9326(0x0400)
      SendCommand_ILI9326(0x030D)
      SendData_ili9326(0x000A)

      'set GRAM area**************
      SendCommand_ILI9326(ILI9326_H_ADDR_START_POS)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_H_ADDR_END_POS)
      SendData_ili9326(0x00EF)' 240 pixels
      SendCommand_ILI9326(ILI9326_V_ADDR_START_POS)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_V_ADDR_END_POS)
      SendData_ili9326(0x018F) '400 pixels
      SendCommand_ILI9326(ILI9326_BASE_IMG_DISP_CTRL_1)
      SendData_ili9326(0x3500)
      SendCommand_ILI9326(ILI9326_BASE_IMG_DISP_CTRL_2)
      SendData_ili9326(0x0001)
      SendCommand_ILI9326(ILI9326_BASE_IMG_DISP_CTRL_3)
      SendData_ili9326(0x0000)

      SendCommand_ILI9326(ILI9326_PANEL_INTF_CTRL_1) 'set screen defaults
      SendData_ili9326(0x0010)
      SendCommand_ILI9326(ILI9326_PANEL_INTF_CTRL_2) 'last set of commands
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_FRAME_RATE_COLOR_CTRL)
      SendData_ili9326(0x0000)
      SendCommand_ILI9326(ILI9326_DISP_CTRL_1)
      SendData_ili9326(0x0173) 'display on

      'Change to RGB TFT color and standard orientation
      SendCommand_ILI9326(ILI9326_ENTRY_MODE)
      SendData_ili9326( ILI9326_ENTRY_MODE_BGR )
      ILI9326_AddressType = Portrait
      ILI9326_GLCD_WIDTH_ADJ = 0
      ILI9326_GLCD_HEIGHT_ADJ = GLCD_HEIGHT - 1

      'Default Colours
      GLCDBackground = ILI9326_BLACK
      GLCDForeground = ILI9326_WHITE

      'Variables required for device
      ILI9326_GLCD_WIDTH = GLCD_WIDTH
      ILI9326_GLCD_HEIGHT = GLCD_HEIGHT

      #ifndef GLCD_OLED_FONT
        GLCDFontWidth = 6
      #endif
      #ifdef GLCD_OLED_FONT
        GLCDFontWidth = 5
      #endif

      GLCDfntDefaultsize = 1


'      GLCDRotate( Portrait  )

      'Clear screen
      GLCDCLS ( GLCDBackground )
end sub



sub GLCDCLS_ILI9326 ( Optional In  GLCDBackground as word = GLCDBackground )

    ' initialise global variable. Required variable for Circle in all DEVICE DRIVERS- DO NOT DELETE
    GLCD_yordinate = 0

    sendCommand_ili9326(ILI9326_GRAM_ADDR_V_SET)
    sendData_ili9326( 0 )
    sendCommand_ili9326(ILI9326_GRAM_ADDR_H_SET)
    sendData_ili9326( 0 )

    SendCommand_ili9326(ILI9326_GRAM_WR_DATA)

    ' Use this method rather then call SendData_ili9326( as this is faster
    set ILI9326_GLCD_RS ON

    repeat GLCD_HEIGHT
      repeat GLCD_WIDTH

          ILI9326_DataPort=GLCDBackground_h

          set ILI9326_GLCD_WR OFF
          set ILI9326_GLCD_WR ON

          ILI9326_DataPort=GLCDBackground

          set ILI9326_GLCD_WR OFF
          set ILI9326_GLCD_WR ON

      end repeat
    end repeat

    sendCommand_ili9326(ILI9326_GRAM_ADDR_V_SET)
    sendData_ili9326( 0 )
    sendCommand_ili9326(ILI9326_GRAM_ADDR_H_SET)
    sendData_ili9326( 0 )


end sub



sub PSet_ILI9326( In GLCDX as word, In GLCDY as word, In GLCDColour As Word )

    Dim ILI9326_GLCD_WIDTH_ADJ, ILI9326_GLCD_HEIGHT_ADJ as word
    Dim ILI9326_AddressType as byte

    sendCommand_ili9326(ILI9326_GRAM_ADDR_H_SET)
    select case ILI9326_AddressType

      case Portrait
        sendData_ili9326( GLCDX )
      case Portrait_Rev
        sendData_ili9326( ILI9326_GLCD_WIDTH_ADJ - GLCDX )

      case Landscape
        sendData_ili9326( ILI9326_GLCD_HEIGHT_ADJ - GLCDY )
      case Landscape_Rev
        sendData_ili9326( GLCDY )

    end select

    sendCommand_ili9326(ILI9326_GRAM_ADDR_V_SET)
    select case ILI9326_AddressType

      case Portrait
        sendData_ili9326( ILI9326_GLCD_HEIGHT_ADJ - GLCDY )
      case Portrait_Rev
        sendData_ili9326( GLCDY )

      case Landscape
        sendData_ili9326( ILI9326_GLCD_WIDTH_ADJ - GLCDX )
      case Landscape_Rev
        sendData_ili9326( GLCDX )

    end select



    sendCommand_ili9326(ILI9326_GRAM_WR_DATA)
    sendData_ili9326( GLCDColour )

end sub

sub SendCommand_ili9326(ILI9326_SENDWORD)

    set ILI9326_GLCD_CS OFF
    set ILI9326_GLCD_RS OFF
    set ILI9326_GLCD_RD ON
    set ILI9326_GLCD_WR ON

    ILI9326_DataPort = ILI9326_SENDWORD_h

    set ILI9326_GLCD_WR OFF
    set ILI9326_GLCD_WR ON

    ILI9326_DataPort = ILI9326_SENDWORD

    set ILI9326_GLCD_WR OFF
    set ILI9326_GLCD_WR ON

end sub

sub SendData_ILI9326(ILI9326_SENDWORD)

    set ILI9326_GLCD_RS ON

    ILI9326_DataPort=ILI9326_SENDWORD_h

    set ILI9326_GLCD_WR OFF
    set ILI9326_GLCD_WR ON

    ILI9326_DataPort=ILI9326_SENDWORD

    set ILI9326_GLCD_WR OFF
    set ILI9326_GLCD_WR ON

end sub

#script
    _GLCD_WIDTH_FAST = 0
    _GLCD_HEIGHT_FAST = 0
    _GLCD_PIXELS_COUNT = INT( GLCD_WIDTH * GLCD_HEIGHT )
    _GLCD_WIDTH_FAST = 2
    _GLCD_HEIGHT_FAST = INT(_GLCD_PIXELS_COUNT / _GLCD_WIDTH_FAST)
    IF _GLCD_HEIGHT_FAST > 65535 Then
        _GLCD_WIDTH_FAST = 4
        _GLCD_HEIGHT_FAST = _GLCD_PIXELS_COUNT / _GLCD_WIDTH_FAST
        IF _GLCD_HEIGHT_FAST > 65535 Then
            _GLCD_WIDTH_FAST = 8
            _GLCD_HEIGHT_FAST = INT(_GLCD_PIXELS_COUNT / _GLCD_WIDTH_FAST)
        END IF
    END IF

#endscript







sub GLCDChar_ili9326(x_ili9326,y_ili9326,char_ili9326,Optional In LineColour as word = GLCDForeground)
    dim col,j,i,xx as word
    for i=1 to 13
        sendCommand_ili9326(0x0200)
        sendData_ili9326(y_ili9326)
        sendCommand_ili9326(0x0201)
        sendData_ili9326(400-x_ili9326+i)
        sendCommand_ili9326(0x0202)
        readtable courier14,char_ili9326*13+i,xx
        for j=0 to 15
          col=GLCDBackground
          if xx.0 = 1 then col=LineColour
            sendData_ili9326(COL)
          rotate xx right
        next j
    next i
end sub


sub GLCDRotate_ILI9326 ( in ILI9326_AddressType )

  Dim ILI9326_GLCD_WIDTH, ILI9326_GLCD_HEIGHT as word
  Dim ILI9326_GLCD_WIDTH_ADJ, ILI9326_GLCD_HEIGHT_ADJ as word

#
  Select case ILI9326_AddressType
      Case PORTRAIT
          ILI9326_GLCD_WIDTH = GLCD_WIDTH
          ILI9326_GLCD_HEIGHT = GLCD_HEIGHT
          ILI9326_GLCD_WIDTH_ADJ = 0
          ILI9326_GLCD_HEIGHT_ADJ = GLCD_HEIGHT - 1

          'Change to RGB TFT color and standard orientation
          SendCommand_ILI9326(ILI9326_ENTRY_MODE)
          SendData_ili9326( ILI9326_ENTRY_MODE_BGR )

      Case Landscape
          ILI9326_GLCD_WIDTH = GLCD_HEIGHT
          ILI9326_GLCD_HEIGHT = GLCD_WIDTH
          ILI9326_GLCD_WIDTH_ADJ = GLCD_HEIGHT - 1
          ILI9326_GLCD_HEIGHT_ADJ = GLCD_WIDTH - 1

          SendCommand_ILI9326(ILI9326_ENTRY_MODE)
          SendData_ili9326( ILI9326_ENTRY_MODE_BGR | ILI9326_ENTRY_MODE_ID1 | ILI9326_ENTRY_MODE_AM )

      Case Portrait_Rev
          ILI9326_GLCD_WIDTH = GLCD_WIDTH
          ILI9326_GLCD_HEIGHT = GLCD_HEIGHT
          ILI9326_GLCD_WIDTH_ADJ = GLCD_WIDTH - 1
          ILI9326_GLCD_HEIGHT_ADJ = 0

          SendCommand_ILI9326(ILI9326_ENTRY_MODE)
          SendData_ili9326( ILI9326_ENTRY_MODE_BGR | ILI9326_ENTRY_MODE_ID1 )

      Case Landscape_Rev
          ILI9326_GLCD_WIDTH = GLCD_HEIGHT
          ILI9326_GLCD_HEIGHT = GLCD_WIDTH
          ILI9326_GLCD_WIDTH_ADJ = 0
          ILI9326_GLCD_HEIGHT_ADJ = 0

          SendCommand_ILI9326(ILI9326_ENTRY_MODE)
          SendData_ili9326( ILI9326_ENTRY_MODE_BGR | ILI9326_ENTRY_MODE_ID0 | ILI9326_ENTRY_MODE_ID1 | ILI9326_ENTRY_MODE_AM )

      Case Else
          ILI9326_GLCD_WIDTH = GLCD_WIDTH
          ILI9326_GLCD_HEIGHT = GLCD_HEIGHT
          ILI9326_GLCD_WIDTH_ADJ = 0
          ILI9326_GLCD_HEIGHT_ADJ = GLCD_HEIGHT - 1

          'Change to RGB TFT color and standard orientation
          SendCommand_ILI9326(ILI9326_ENTRY_MODE)
          SendData_ili9326( ILI9326_ENTRY_MODE_BGR )

  End Select

end sub


table courier14
0x0000   '
0x0000   '
0x0000   '
0x1F80   '    ######
0x7FE0   '  ##########
0xE070   ' ###      ###
0xC030   ' ##        ##
0xC030   ' ##        ##
0xE070   ' ###      ###
0x7FE0   '  ##########
0x1F80   '    ######
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x0030   '           ##
0x0030   '           ##
0xFFF0   ' ############
0xFFF0   ' ############
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x3830   '   ###     ##
0x7C30   '  #####    ##
0xE630   ' ###  ##   ##
0xC330   ' ##    ##  ##
0xC1B0   ' ##     ## ##
0xE0F0   ' ###     ####
0x7070   '  ###     ###
0x3030   '   ##      ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x39C0   '   ###  ###
0x7FE0   '  ##########
0xCF30   ' ##  ####  ##
0xC630   ' ##   ##   ##
0xC630   ' ##   ##   ##
0xC630   ' ##   ##   ##
0x6030   '  ##       ##
0x6070   '  ##      ###
0x0060   '          ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x01B0   '        ## ##
0xFFF0   ' ############
0xFFF0   ' ############
0xE1B0   ' ###    ## ##
0x39B0   '   ###  ## ##
0x1D80   '    ### ##
0x0780   '      ####
0x0380   '       ###
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x03C0   '       ####
0xC7E0   ' ##   ######
0xCE70   ' ##  ###  ###
0xCC30   ' ##  ##    ##
0xCC30   ' ##  ##    ##
0xFE30   ' #######   ##
0xFE70   ' #######  ###
0x0060   '          ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0xC3C0   ' ##    ####
0xC7E0   ' ##   ######
0xCE70   ' ##  ###  ###
0xCC30   ' ##  ##    ##
0x6C30   '  ## ##    ##
0x7670   '  ### ##  ###
0x3FE0   '   #########
0x0F80   '     #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0xF000   ' ####
0xFE00   ' #######
0xDFC0   ' ## #######
0xC3F0   ' ##    ######
0xC070   ' ##       ###
0xC000   ' ##
0xE000   ' ###
0xE000   ' ###
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x39C0   '   ###  ###
0x7FE0   '  ##########
0xC630   ' ##   ##   ##
0xC630   ' ##   ##   ##
0xC630   ' ##   ##   ##
0xC630   ' ##   ##   ##
0x7FE0   '  ##########
0x39C0   '   ###  ###
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x1F00   '    #####
0x7FC0   '  #########
0xE6E0   ' ###  ## ###
0xC360   ' ##    ## ##
0xC330   ' ##    ##  ##
0xE730   ' ###  ###  ##
0x7E30   '  ######   ##
0x3C30   '   ####    ##
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x0070   '          ###
0x03F0   '       ######
0x1FB0   '    ###### ##
0x7D80   '  ##### ##
0x7180   '  ###   ##
0x7D80   '  ##### ##
0x6FB0   '  ## ##### ##
0x63F0   '  ##   ######
0x6070   '  ##      ###
0x0030   '           ##
0x0000   '
0x0000   '
0x0000   '
0x01E0   '        ####
0x3BF0   '   ### ######
0x7F30   '  #######  ##
0x6630   '  ##  ##   ##
0x6630   '  ##  ##   ##
0x6630   '  ##  ##   ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x7860   '  ####    ##
0x7860   '  ####    ##
0x2030   '   #       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x3060   '   ##     ##
0x3FE0   '   #########
0x0F80   '     #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0F80   '     #####
0x3FE0   '   #########
0x3060   '   ##     ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x78F0   '  ####   ####
0x78F0   '  ####   ####
0x6030   '  ##       ##
0x6F30   '  ## ####  ##
0x6F30   '  ## ####  ##
0x6630   '  ##  ##   ##
0x6630   '  ##  ##   ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x7800   '  ####
0x7800   '  ####
0x6000   '  ##
0x6F30   '  ## ####  ##
0x6F30   '  ## ####  ##
0x6630   '  ##  ##   ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0300   '       ##
0x7BE0   '  #### #####
0x7BF0   '  #### ######
0x3330   '   ##  ##  ##
0x6330   '  ##   ##  ##
0x6330   '  ##   ##  ##
0x6030   '  ##       ##
0x3060   '   ##     ##
0x3FE0   '   #########
0x0F80   '     #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x6030   '  ##       ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6630   '  ##  ##   ##
0x0600   '      ##
0x6630   '  ##  ##   ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x6000   '  ##
0x6000   '  ##
0x7FC0   '  #########
0x7FE0   '  ##########
0x6070   '  ##      ###
0x6030   '  ##       ##
0x6030   '  ##       ##
0x0030   '           ##
0x01E0   '        ####
0x01E0   '        ####
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x6030   '  ##       ##
0x60F0   '  ##     ####
0x71E0   '  ###   ####
0x7B80   '  #### ###
0x0E00   '     ###
0x6630   '  ##  ##   ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x01F0   '        #####
0x01F0   '        #####
0x0030   '           ##
0x0030   '           ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x6030   '  ##       ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x7830   '  ####     ##
0x0F30   '     ####  ##
0x0180   '        ##
0x0F30   '     ####  ##
0x7830   '  ####     ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x6000   '  ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x61F0   '  ##    #####
0x0F80   '     #####
0x7C30   '  #####    ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0F80   '     #####
0x3FE0   '   #########
0x3060   '   ##     ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x6030   '  ##       ##
0x3060   '   ##     ##
0x3FE0   '   #########
0x0F80   '     #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x1C00   '    ###
0x3E00   '   #####
0x6300   '  ##   ##
0x6330   '  ##   ##  ##
0x6330   '  ##   ##  ##
0x6330   '  ##   ##  ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0F8C   '     #####
0x3FEE   '   #########
0x3066   '   ##     ##
0x603C   '  ##       ##
0x603C   '  ##       ##
0x603E   '  ##       ##
0x3066   '   ##     ##
0x3FE0   '   #########
0x0F80   '     #####
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x1C70   '    ###   ###
0x3EE0   '   ##### ###
0x77C0   '  ### #####
0x6380   '  ##   ###
0x6330   '  ##   ##  ##
0x6330   '  ##   ##  ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x79C0   '  ####  ###
0x7BE0   '  #### #####
0x2370   '   #   ## ###
0x6330   '  ##   ##  ##
0x6230   '  ##   #   ##
0x6630   '  ##  ##   ##
0x7620   '  ### ##   #
0x3EF0   '   ##### ####
0x1CF0   '    ###  ####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x7C00   '  #####
0x7C00   '  #####
0x6030   '  ##       ##
0x6030   '  ##       ##
0x7FF0   '  ###########
0x7FF0   '  ###########
0x6030   '  ##       ##
0x6030   '  ##       ##
0x7C00   '  #####
0x7C00   '  #####
0x0000   '
0x0000   '
0x0000   '
0x6000   '  ##
0x7FC0   '  #########
0x7FE0   '  ##########
0x6070   '  ##      ###
0x0030   '           ##
0x6070   '  ##      ###
0x7FE0   '  ##########
0x7FC0   '  #########
0x6000   '  ##
0x0000   '
0x0000   '
0x0000   '
0x6000   '  ##
0x7000   '  ###
0x7E00   '  ######
0x6F80   '  ## #####
0x01F0   '        #####
0x0070   '          ###
0x01F0   '        #####
0x6F80   '  ## #####
0x7E00   '  ######
0x7000   '  ###
0x6000   '  ##
0x0000   '
0x0000   '
0x6000   '  ##
0x7F00   '  #######
0x7FF0   '  ###########
0x60F0   '  ##     ####
0x6FF0   '  ## ########
0x0E00   '     ###
0x6FF0   '  ## ########
0x60F0   '  ##     ####
0x7FF0   '  ###########
0x7F00   '  #######
0x6000   '  ##
0x0000   '
0x0000   '
0x6030   '  ##       ##
0x6030   '  ##       ##
0x7070   '  ###     ###
0x78F0   '  ####   ####
0x0D80   '     ## ##
0x0700   '      ###
0x0D80   '     ## ##
0x78F0   '  ####   ####
0x7070   '  ###     ###
0x6030   '  ##       ##
0x6030   '  ##       ##
0x0000   '
0x0000   '
0x6000   '  ##
0x7000   '  ###
0x7830   '  ####     ##
0x6E30   '  ## ###   ##
0x07F0   '      #######
0x07F0   '      #######
0x6E30   '  ## ###   ##
0x7830   '  ####     ##
0x7000   '  ###
0x6000   '  ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x70F0   '  ###    ####
0x78F0   '  ####   ####
0x6E30   '  ## ###   ##
0x6730   '  ##  ###  ##
0x61B0   '  ##    ## ##
0x78F0   '  ####   ####
0x7870   '  ####    ###
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x0FF0   '     ########
0x1FF0   '    #########
0x1B60   '    ## ## ##
0x1B30   '    ## ##  ##
0x1B30   '    ## ##  ##
0x1BB0   '    ## ### ##
0x09F0   '     #  #####
0x00E0   '         ###
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x07C0   '      #####
0x0FE0   '     #######
0x1C70   '    ###   ###
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x0C60   '     ##   ##
0xFFF0   ' ############
0xFFF0   ' ############
0xC030   ' ##        ##
0x0000   '
0x0000   '
0x0000   '
0x1E60   '    ####  ##
0x0E30   '     ###   ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1C70   '    ###   ###
0x0FE0   '     #######
0x07C0   '      #####
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0xFFF0   ' ############
0xFFF0   ' ############
0xCC60   ' ##  ##   ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1C70   '    ###   ###
0x0FE0   '     #######
0x07C0   '      #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0760   '      ### ##
0x0F70   '     #### ###
0x1B30   '    ## ##  ##
0x1B30   '    ## ##  ##
0x1B30   '    ## ##  ##
0x1B30   '    ## ##  ##
0x1B70   '    ## ## ###
0x0FE0   '     #######
0x07C0   '      #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0xC000   ' ##
0xD830   ' ## ##     ##
0xD830   ' ## ##     ##
0xD830   ' ## ##     ##
0xD830   ' ## ##     ##
0xFFF0   ' ############
0x7FF0   '  ###########
0x1830   '    ##     ##
0x1830   '    ##     ##
0x0000   '
0x0000   '
0x0000   '
0x1800   '    ##
0x1FFC   '    #########
0x1FFE   '    #########
0x0C63   '     ##   ##
0x1833   '    ##     ##
0x1833   '    ##     ##
0x1833   '    ##     ##
0x1C73   '    ###   ###
0x0FE0   '     #######
0x07C0   '      #####
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x0FF0   '     ########
0x1FF0   '    #########
0x1830   '    ##     ##
0x1800   '    ##
0x1800   '    ##
0x0C30   '     ##    ##
0xFFF0   ' ############
0xFFF0   ' ############
0xC030   ' ##        ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x0030   '           ##
0x0030   '           ##
0xDFF0   ' ## #########
0xDFF0   ' ## #########
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x1FFC   '    #########
0xDFFE   ' ## #########
0xD803   ' ## ##
0x1803   '    ##
0x1803   '    ##
0x1803   '    ##
0x1803   '    ##
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1870   '    ##    ###
0x1CC0   '    ###  ##
0x0780   '      ####
0x0300   '       ##
0xFFF0   ' ############
0xFFF0   ' ############
0xC030   ' ##        ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x0030   '           ##
0x0030   '           ##
0xFFF0   ' ############
0xFFF0   ' ############
0xC030   ' ##        ##
0xC030   ' ##        ##
0xC030   ' ##        ##
0x0000   '
0x0000   '
0x0030   '           ##
0x0FF0   '     ########
0x1FF0   '    #########
0x1800   '    ##
0x1830   '    ##     ##
0x0FF0   '     ########
0x1FF0   '    #########
0x1800   '    ##
0x1830   '    ##     ##
0x1FF0   '    #########
0x1FF0   '    #########
0x1830   '    ##     ##
0x0000   '
0x0000   '
0x0030   '           ##
0x0FF0   '     ########
0x1FF0   '    #########
0x1830   '    ##     ##
0x1800   '    ##
0x1800   '    ##
0x0C30   '     ##    ##
0x1FF0   '    #########
0x1FF0   '    #########
0x1830   '    ##     ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x07C0   '      #####
0x0FE0   '     #######
0x1C70   '    ###   ###
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1C70   '    ###   ###
0x0FE0   '     #######
0x07C0   '      #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x07C0   '      #####
0x0FE0   '     #######
0x1C70   '    ###   ###
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1833   '    ##     ##
0x0C63   '     ##   ##
0x1FFF   '    #########
0x1FFF   '    #########
0x1803   '    ##
0x0000   '
0x0000   '
0x1803   '    ##
0x1FFF   '    #########
0x1FFF   '    #########
0x0C63   '     ##   ##
0x1833   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1C70   '    ###   ###
0x0FE0   '     #######
0x07C0   '      #####
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0C00   '     ##
0x1C30   '    ###    ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x0C30   '     ##    ##
0x1FF0   '    #########
0x1FF0   '    #########
0x1830   '    ##     ##
0x1830   '    ##     ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x1CE0   '    ###  ###
0x1DE0   '    ### ####
0x19B0   '    ##  ## ##
0x19B0   '    ##  ## ##
0x1B30   '    ## ##  ##
0x1B30   '    ## ##  ##
0x0F70   '     #### ###
0x0E70   '     ###  ###
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0060   '          ##
0x1860   '    ##    ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1830   '    ##     ##
0xFFF0   ' ############
0xFFE0   ' ###########
0x1800   '    ##
0x1800   '    ##
0x0000   '
0x0000   '
0x0000   '
0x0030   '           ##
0x1FF0   '    #########
0x1FF0   '    #########
0x1860   '    ##    ##
0x0030   '           ##
0x0030   '           ##
0x0030   '           ##
0x1FF0   '    #########
0x1FE0   '    ########
0x1800   '    ##
0x0000   '
0x0000   '
0x1800   '    ##
0x1800   '    ##
0x1C00   '    ###
0x1F00   '    #####
0x1BC0   '    ## ####
0x00F0   '         ####
0x0030   '           ##
0x00F0   '         ####
0x1BC0   '    ## ####
0x1F00   '    #####
0x1C00   '    ###
0x1800   '    ##
0x1800   '    ##
0x0000   '
0x1800   '    ##
0x1F00   '    #####
0x1FF0   '    #########
0x18F0   '    ##   ####
0x01C0   '        ###
0x0700   '      ###
0x01C0   '        ###
0x18F0   '    ##   ####
0x1FF0   '    #########
0x1F00   '    #####
0x1800   '    ##
0x0000   '
0x0000   '
0x1830   '    ##     ##
0x1830   '    ##     ##
0x1C70   '    ###   ###
0x1EF0   '    #### ####
0x0380   '       ###
0x0380   '       ###
0x1EF0   '    #### ####
0x1C70   '    ###   ###
0x1830   '    ##     ##
0x1830   '    ##     ##
0x0000   '
0x0000   '
0x0000   '
0x1800   '    ##
0x1C00   '    ###
0x1F00   '    #####
0x1BE3   '    ## #####
0x00FB   '         ####
0x003F   '           ##
0x00FF   '         ####
0x1BE3   '    ## #####
0x1F03   '    #####
0x1C03   '    ###
0x1800   '    ##
0x0000   '
0x0000   '
0x0000   '
0x1870   '    ##    ###
0x1C70   '    ###   ###
0x1E30   '    ####   ##
0x1B30   '    ## ##  ##
0x19B0   '    ##  ## ##
0x18F0   '    ##   ####
0x1C70   '    ###   ###
0x1C30   '    ###    ##
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   ' '62
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0000   '
0x0E00 '     ###
0x0E00 '     ###
0x0E38 '     ###   ###
0x0778 '      ### ####
0x07F8 '      ########
0xFFE0 ' ###########
0xFFC0 ' ########## '63
0xFFE0 ' ###########
0x07F8 '      ########
0x0778 '      ### ####
0x0E38 '     ###   ###
0x0E00 '     ###
0x0E00 '     ###
0x0006  '              ##
0x000E  '             ###
0x003E  '           #####
0x00F6  ' lambda  #### ##
0x03C0  '       ####
0x0F00  '     ####
0x3F00  '   ######
0xF3C0  ' ####  ####
0xC0F6  ' ##      #### ##
0xC03E  ' ##        #####
0xC00E  ' ##          ###
0x0006  '              ##
0x0000  '
0x0000
0x0000
0x0000
0x0180
0x0180
0x0180
0x0180 '- minus
0x0180
0x0180
0x0180
0x0000
0x0000
0x0000
0x0000  '
0x0000  '
0x0000  '
0x01C0  '        ###
0x03E0  '       #####
0x07F0  '      #######
0x07F0  '      #######
0x07F0  '      #######
0x03E0  '       #####
0x01C0  '        ###
0x0000  '
0x0000  '
0x0000  '
0x0000
0x0000
0x0000
0x0CC0
0x0CC0
0x0CC0
0x0CC0
0x0CC0 '= equals sign
0x0CC0
0x0CC0
0x0000
0x0000
0x0000
end table


'''Draws a character at the specified location on the ST7920 GLCD
'''@param StringLocX X coordinate for message
'''@param CharLocY Y coordinate for message
'''@param Chars String to display
'''@param LineColour Line Color, either 1 or 0
'''Draws a character at the specified location on the ST7920 GLCD
'''@param StringLocX X coordinate for message
'''@param CharLocY Y coordinate for message
'''@param Chars String to display
'''@param LineColour Line Color, either 1 or 0
Sub GLCDDrawChar_ILI9326(In CharLocX as word, In CharLocY as word, In CharCode, Optional In LineColour as word = GLCDForeground )

  'This has got a tad complex
  'We have three major pieces
  '1 The preamble - this just adjusted color and the input character
  '2 The code that deals with GCB fontset
  '3 The code that deals with OLED fontset
  '
  'You can make independent change to section 2 and 3 but they are mutual exclusive with many common pieces

   dim CharCol, CharRow, GLCDTemp as word
   dim COLSperfont, CurrCharVal, CurrCharRow, CurrCharCol, ROWSperfont as byte
   CharCode -= 15

   CharCol=0

   #ifndef GLCD_OLED_FONT

        if CharCode>=178 and CharCode<=202 then
           CharLocY=CharLocY-1
        end if

        For CurrCharCol = 1 to 5
          Select Case CurrCharCol
            Case 1: ReadTable GLCDCharCol3, CharCode, CurrCharVal
            Case 2: ReadTable GLCDCharCol4, CharCode, CurrCharVal
            Case 3: ReadTable GLCDCharCol5, CharCode, CurrCharVal
            Case 4: ReadTable GLCDCharCol6, CharCode, CurrCharVal
            Case 5: ReadTable GLCDCharCol7, CharCode, CurrCharVal
          End Select
          CharRow=0
          For CurrCharRow = 1 to 8
              CharColS=0
              For Col=1 to GLCDfntDefaultsize
                    CharColS +=1
                    CharRowS=0
                    For Row=1 to GLCDfntDefaultsize
                        CharRowS +=1
                        if CurrCharVal.0=1 then
                           PSet [word]CharLocX + CharCol+ CharColS, [word]CharLocY + CharRow+CharRowS, LineColour
                        Else
                           PSet [word]CharLocX + CharCol+ CharColS, [word]CharLocY + CharRow+CharRowS, GLCDBackground
                        End if
                    Next Row
              Next Col
            Rotate CurrCharVal Right
            CharRow +=GLCDfntDefaultsize
          Next
          CharCol +=GLCDfntDefaultsize
        Next

    #endif

    #ifdef GLCD_OLED_FONT

        'Calculate the pointer to the OLED fonts.
        'These fonts are not multiple tables one is a straight list the other is a lookup table with data.
        Dim LocalCharCode as word

        'Get key information and set up the fonts parameters
        Select case GLCDfntDefaultSize
            case 1 'This font is two font tables of an index and data
              CharCode = CharCode - 16
              ReadTable OLEDFont1Index, CharCode, LocalCharCode
              ReadTable OLEDFont1Data, LocalCharCode , COLSperfont
              GLCDFontWidth = COLSperfont + 1
              ROWSperfont = 7  'which is really 8 as we start at 0

            case 2 'This is one font table
              CharCode = CharCode - 17
              'Pointer to table of font elements
              LocalCharCode = (CharCode * 20)
              COLSperfont = 9  'which is really 10 as we start at 0

              ROWSperfont=15  'which is really 16 as we start at 0

        End Select


        'The main loop - loop throught the number of columns
        For CurrCharCol = 0 to COLSperfont  'number of columns in the font , with two row of data

          'Index the pointer to the code that we are looking for as we need to do this lookup many times getting more font data
          LocalCharCode++
          Select case GLCDfntDefaultSize
              case 1
                ReadTable OLEDFont1Data, LocalCharCode, CurrCharVal

              case 2
                #ifndef GLCD_Disable_OLED_FONT2
                  'Read this 20 times... (0..COLSperfont) [ * 2 ]
                  ReadTable OLEDFont2, LocalCharCode, CurrCharVal
                #endif
                #ifdef GLCD_Disable_OLED_FONT2
                  CurrCharVal = GLCDBackground
                #endif
          End Select

            'we handle 8 or 16 pixels of height
            For CurrCharRow = 0 to ROWSperfont
                'Set the pixel
                If CurrCharVal.0 = 0 Then
                          PSet CharLocX + CurrCharCol, CharLocY + CurrCharRow, GLCDBackground
                Else
                          PSet CharLocX + CurrCharCol, CharLocY + CurrCharRow, GLCDForeground
                End If

                Rotate CurrCharVal Right

                'Set to next row of date, a second row
                if GLCDfntDefaultSize = 2 and CurrCharRow = 7 then
                  LocalCharCode++
                  #ifndef GLCD_Disable_OLED_FONT2
                    ReadTable OLEDFont2, LocalCharCode, CurrCharVal
                  #endif
                  #ifdef GLCD_Disable_OLED_FONT2
                    CurrCharVal = GLCDBackground
                  #endif
                end if

                'It is the intercharacter space, put out one pixel row
                if CurrCharCol = COLSperfont then
                    'Put out a white intercharacter pixel/space
                     GLCDTemp = CharLocX + CurrCharCol
                     if GLCDfntDefaultSize = 2 then
                        GLCDTemp++
                     end if
                     PSet GLCDTemp , CharLocY + CurrCharRow, GLCDBackground
                end if

            Next



        Next


    #endif

End Sub

Sub FilledBox_ILI9326(In LineX1 as Word, In LineY1 as Word, In LineX2 as Word, In LineY2 as Word, Optional In LineColour As Word = GLCDForeground)
  dim GLCDTemp, DrawLine as word

  'Make sure that starting point (1) is always less than end point (2)
  If LineX1 > LineX2 Then
    GLCDTemp = LineX1
    LineX1 = LineX2
    LineX2 = GLCDTemp
  End If
  If LineY1 > LineY2 Then
    GLCDTemp = LineY1
    LineY1 = LineY2
    LineY2 = GLCDTemp
  End If


  'Draw lines going across
  For DrawLine = LineX1 To LineX2
    For GLCDTemp = LineY1 To LineY2
      PSet DrawLine, GLCDTemp, LineColour
    Next
  Next

End Sub


Sub GLCDDrawString_ILI9326( In StringLocX as word, In CharLocY as word, In Chars as string, Optional In LineColour as word = GLCDForeground )

  dim GLCDPrintLoc as word
  dim xchar as byte

  GLCDPrintLoc = StringLocX

  #ifdef GLCD_OLED_FONT
      dim OldGLCDFontWidth as Byte
      OldGLCDFontWidth = GLCDFontWidth
  #endif

  for xchar = 1 to Chars(0)

      GLCDDrawChar GLCDPrintLoc , CharLocY , Chars(xchar), LineColour
      GLCDPrintIncrementPixelPositionMacro

  next

  #ifdef GLCD_OLED_FONT
      GLCDFontWidth = OldGLCDFontWidth
  #endif


end sub


'''Displays a string in a larger fonti.e.  BigPrint_ILI9326 ( 30, ILI9326_GLCD_HEIGHT - 20 , "BigPrint_ILI9326" )
'''@param PrintLocX X coordinate for message
'''@param PrintLocY Y coordinate for message
'''@param PrintData String to display
'''@param Color Optional color
Sub BigPrint_ILI9326(In PrintLocX as Word, In PrintLocY as Word,  PrintData As String, Optional In  Color as word = GLCDForeground)
  Dim GLCDPrintLoc, SysPrintTemp as word
  Dim PrintLen as byte
  PrintLen = PrintData(0)
  If PrintLen = 0 Then Exit Sub
  GLCDPrintLoc = PrintLocX
  For SysPrintTemp = 1 To PrintLen
    DrawBigChar_ILI9326 GLCDPrintLoc, PrintLocY, PrintData(SysPrintTemp), Color
    GLCDPrintLoc += 13
  Next
End Sub

'''Draws a Vertical Line on the GLCD with a
'''@param GLCDY1 Y coordinate of one end of the line
'''@param GLCDY2 Y coordinate of the other end of the line
'''@param GLCDX1 X coordinate of the line
'''@param LineColour color
Sub DrawBigChar_ILI9326 (In CharLocX as Word, In CharLocY as Word, In CharCode, Optional In  Color as word = GLCDForeground )

    dim Locx, Locy, CurrCol as Word
    dim CurrCharVal, CurrCharRow, CurrCharCol as byte

    if CharCode <=126 Then
       CharCode -=32
       Goto GCBBigTables
    end if
    if CharCode <=210 Then
       CharCode -=33
       Goto GCBBigTables
    end if
    if CharCode <= 250 Then
       CharCode -=34
       Goto GCBBigTables
    end if
    GCBBigTables:
    For CurrCharCol = 1 to 24
      CurrCol=CurrCharCol+CharCode*24-(CharCode/10)*240
      if CharCode>=0 and CharCode<=9 then ReadTable BigFont32_41 , CurrCol, CurrCharVal
      if CharCode>=10 and CharCode<=19 then ReadTable BigFont42_51 , CurrCol, CurrCharVal
      if CharCode>=20 and CharCode<=29 then ReadTable BigFont52_61 , CurrCol, CurrCharVal
      if CharCode>=30 and CharCode<=39 then ReadTable BigFont62_71 , CurrCol, CurrCharVal
      if CharCode>=40 and CharCode<=49 then ReadTable BigFont72_81 , CurrCol, CurrCharVal
      if CharCode>=50 and CharCode<=59 then ReadTable BigFont82_91 , CurrCol, CurrCharVal
      if CharCode>=60 and CharCode<=69 then ReadTable BigFont92_101 , CurrCol, CurrCharVal
      if CharCode>=70 and CharCode<=79 then ReadTable BigFont102_111 , CurrCol, CurrCharVal
      if CharCode>=80 and CharCode<=89 then ReadTable BigFont112_121 , CurrCol, CurrCharVal
      if CharCode>=90 and CharCode<=99 then ReadTable BigFont122_126 , CurrCol, CurrCharVal
      if CharCode>=160 and CharCode<=169 then ReadTable BigFont193_202 , CurrCol, CurrCharVal
      if CharCode>=170 and CharCode<=179 then ReadTable BigFont203_212 , CurrCol, CurrCharVal
      if CharCode>=180 and CharCode<=183 then ReadTable BigFont213_216 , CurrCol, CurrCharVal

        if CurrCharVal=36 then CurrCharVal=33
        For CurrCharRow = 1 to 8
          LocX=[word]CharLocX+CurrCharCol
          LocY=[Word]CharLocY+CurrCharRow
          if CurrCharCol>12 then
             LocX= LocX - 12
             LocY= LocY + 8
          end if
          if CurrCharVal.0=1 then
             PSet_ILI9326 LocX , LocY , Color
          end if
          Rotate CurrCharVal Right
        Next
    Next
End Sub
